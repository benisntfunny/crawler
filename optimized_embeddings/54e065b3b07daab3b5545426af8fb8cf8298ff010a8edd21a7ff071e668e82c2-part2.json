{
    "id": "54e065b3b07daab3b5545426af8fb8cf8298ff010a8edd21a7ff071e668e82c2-part2",
    "url": "https://help.salesforce.com/s/articleView?id=000391803&language=en_US&type=1",
    "content": "nullB2C Commerce Demandware.net Origin Shielding - Phase 3\nPublish Date: Jun 13, 2023\nDescription\nAt Salesforce, we understand that the confidentiality, integrity, and availability of your data is vital to your business, and we take the protection of your data seriously. From April through August 2022, Commerce Cloud is changing access to demandware.net hostnames by creating customer-specific Content Delivery Network (CDN) zones and firewall rules to allow Business Manager and other legitimate traffic from only Commerce Cloud trusted sources. This change helps protect your environments and data from malicious activity such as distributed denial of service (DDoS) or bot attacks.\nResolution\nWhat’s changing?\nAs of April 2022, Commerce Cloud will start blocking traffic that doesn’t originate from Commerce Cloud eCDN from accessing the hyphenated demandware.net hostname. This change rejects calls that use hyphenated hostnames production- or development- to access Open Commerce API (OCAPI) or Storefront.\n\nTraffic through demandware.net doesn’t provide eCDN controls today. Take action to protect your data by ensuring that external traffic passes through the security layers of the eCDN before it accesses your environment.\n\nHow is my org affected?\nThis change affects Commerce Cloud customers who use production- or development- hostnames to access OCAPI or Storefront. Change these hyphenated hostnames to your vanity hostname to avoid any impact from the change. \n\nImplementations that use the Commerce Cloud eCDN or a stacked CDN configuration in front of the Commerce Cloud eCDN, for example, using a vanity hostname such as brand.com, www.brand.com, aren’t affected. If you access Business Manager via production-realm-customer.demandware.net, you aren’t affected because Business Manager is considered internal to the Commerce Cloud ecosystem.\n\nWhen is the change happening?\nThe change is enforced in phases from April through August 2022. \nApril 15: Change enforced for all newly created realms, for example, production and development instances. New Commerce Cloud customers and new realms reject all calls made to hostnames in the hyphenated format for demandware.net.\nMay 15: Change enforced for all existing development instances. All development instances reject calls for development instances made to hostnames in the hyphenated form for demandware.net.\nAugust 15: Change enforced for all existing production instances. All production instances reject calls for production instances made to hostnames in the hyphenated form for demandware.net.\n\nHow can I prepare?\nPlease take the following actions:\nReview current implementations for usage of any calls intentionally made for OCAPI or Storefront with hostnames in the hyphenated form for demandware.net -- for example, production-xxx.demandware.net. \nNote: You can continue to access Business Manager production-realm-customer.demandware.net because Business Manager is considered internal to the Commerce Cloud ecosystem.\nUpdate the affected services or applications to use your vanity hostname, for example, brand.com, www.brand.com, and direct traffic through the eCDN.\nIf you don’t have a vanity hostname, create a custom domain for your OCAPI calls instead of targeting the production- or development- hostnames.\nFollow the instructions to Configure the Embedded CDN to create a custom domain to use for the OCAPI calls. Please note that the instructions in the documentation linked above should be followed for Production and Development instances.\nDeprecate non-Server Name Indication (SNI) traffic from any point-of-sale system, mobile app, or third-party CDN/Proxy. Work with your service providers to ensure they can use SNI for requests/API to eCDN.\nAfter the rollout to your Development instance/s in May 2022, test to confirm whether any services or applications are affected, and then update them accordingly.\n\nWhat steps do I take to deprecate non-SNI traffic?\nUpdate your supported web browsers.\nModern browsers that are less than 6 years old support an extension to the SSL protocol called Server Name Indication (SNI), but older legacy browsers and web servers don’t support SNI.\nThe two largest legacy browsers that struggle with SNI are Internet Explorer on Windows XP (or older) and Android pre-Ice Cream Sandwich.\nReview stacked Akamai configurations for non-SNI traffic going to a SFCC/Cloudflare root domain.\nAkamai Origin Server Setting has an option to Enable SNI while making connections upstream. Most users don’t enable this option. To update an Akamai stacked setup, follow these steps to configure it to use SNI only.\nGo to Property Manager. \nEdit the Origin Configuration, and then enable Use SNI TLS Extension. \nFor more information, see documentation on enabling SNI support.\n\nWhich specific services are still allowed to access the hyphenated demandware.net hostname?\nBusiness Manager\nInventory Service\nAnalytics Service\nMainstreet Order Management Service\nOrder Integration Service\nSalesforce Commerce API (SCAPI) calls\nShopper Login (SLAS)\nImage Downloader Service\nWebDAV calls\n/dw/monitor calls for health checks\nsfcc-ci tool (developer instance only)\nData APIs\n\n\nPlease note that not all Salesforce services will be included in these new firewall rules by Commerce Cloud.\n\n\nGet Help\nDirect questions about this change to the B2C Commerce Trailblazer Group. If you notice a critical impact to environments during enforcement, or if the new firewall rules are not working as expected, you can raise a case with Salesforce Support.\nKnowledge Article Number\n\n000391803\n\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Salesforce Commerce Cloud Security Update",
    "keywords": [
        "ecommerce security",
        "firewall rules",
        "cdn configuration",
        "sni traffic",
        "cloudflare root domain"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact"
    ],
    "embedding": [
        -0.29016023874282837,
        -0.2290569245815277,
        0.4769386947154999,
        -0.29395627975463867,
        -0.4064880609512329,
        0.20069089531898499
    ]
}