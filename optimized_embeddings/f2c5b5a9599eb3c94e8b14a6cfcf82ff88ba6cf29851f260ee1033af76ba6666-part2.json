{
    "id": "f2c5b5a9599eb3c94e8b14a6cfcf82ff88ba6cf29851f260ee1033af76ba6666-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.custommetadatatypes_protection.htm&language=en_US&type=5",
    "content": "nullEnhance Salesforce with Code\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n Enhance Salesforce with Code\n Salesforce Development Tools\n Replacement Tools for Workbench\n Work With APIs\n Write Code\n Developer Console\n Work with Code\n Custom Metadata Types\n What are Custom Metadata Types?\n Create, Edit, and Delete Custom Metadata Types and Records\n Custom Metadata Relationships\n Custom Metadata Type Validation Rules\n Reference Custom Metadata Type Records in Default Values\n Custom Metadata Types and Advanced Formula Fields\n Create and Manage Custom Metadata Types Using CLI Commands\n Access Custom Metadata Records Programmatically\n Control Read Access to Custom Metadata Types\n Protection and Privacy Options for Custom Metadata Types\n Package Custom Metadata Types and Records\n Custom Metadata Types and Process Builder\n Deploy Custom Metadata Types and Records to Production Orgs Using...\n Custom Metadata Types Limitations\n Custom Metadata Allocations and Usage Calculations\n Canvas App Previewer\n Remote Access Application\n Secure Identity for the Internet of Things\n Debug Your Code\n Test Your Changes\n Manage Scratch Orgs\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nENHANCE SALESFORCE WITH CODE\nProtection and Privacy Options for Custom Metadata Types\n\nManage the visibility and permissions of custom metadata types.\n\nREQUIRED EDITIONS\nAvailable in: Salesforce Classic and Lightning Experience\n\n\nAvailable in: Enterprise, Performance, Unlimited, and Developer Editions\n\nYou can create, edit, and delete custom metadata type records from installed packages in: Group and Professional Editions\n\nPackages\n\nFor sensitive data, like application secrets, it’s important that custom metadata types are included in a managed package. When contained in a managed package and set to protected or package protected, they’re not visible to subscribing orgs, making it a good place to store certain kinds of secrets.\n\nNOTE\n\nProtected custom metadata types in an unmanaged package behave like public custom metadata types. Make sure that secrets, personally identifying information, or any private data is stored in protected custom metadata types that are installed as part of a managed package.\n\nVisibility\n\nYou can create protected custom metadata types in developer and scratch orgs. These options for custom metadata types are available.\n\nPackageProtected—When in a second-generation managed package, only Apex code in the same managed package can see the type. The name of the type and the record are visible if they’re referenced in a formula.\nProtected—When in a managed package, only Apex code in the same namespace can see the type. The name of the type and the record are visible if they’re referenced in a formula.\nPublic—Regardless of the type of package (managed or unmanaged), these have access.\nApex\nFormulas\nFlows\nAPI for users with Customize Application permission or permissions granted through profiles or permission sets. The custom metadata type, fields, and unprotected records are visible in Setup.\nSchema Settings\n\nThe Schema Settings option, Restrict access to custom metadata types, is an org-wide preference that limits access to custom metadata types. This preference is enabled by default, and API Read access to custom metadata types must be explicitly granted. Admins with Customize Application permission can grant access to users through profiles and permission sets.\n\nBehavior of Apex, Visualforce, and Aura\n\nThere are different execution code modes within Salesforce that affect the accessibility of custom metadata types.\n\nApex code that runs in system mode ignores user permissions, and your Apex code has access to all objects and fields. Object permissions, field-level security, and sharing rules aren't applied for the current user. Running in system mode ensures that the code doesn’t fail because of hidden fields or objects for a user.\n\nIn user mode, functionality such as Visualforce Components, Visualforce Email templates, and Aura, runs with respect to the user's permissions and sharing of records.\n\nNOTE Functionality that runs in system mode, such as Apex, isn’t affected by the Restrict access to custom metadata types org preference. Also, the with sharing modifier in the Apex class, doesn’t affect query behavior such as, isAccessible() and isCreatable(). If a field value is retrieved in Apex and assigned to a non-sObject variable, the behavior is the same whether or not the preference is enabled.\n\nWhen functionality is run in user mode, such as Visualforce Components, Visualforce Email templates, and Aura, you must have permission to access the custom metadata types. For example, without permission, the fields on Visualforce pages that you don't have access to aren’t displayed. The $Setup global variable (available in Visualforce and formulas) continues to load values by direct reference (meaning, data that’s assigned to an sObject type) regardless of the running user.\n\nConsider this scenario:\n\n(1) Apex loads a record that’s a row included in a variable such as MyCMT__c.\n(2) What Visualforce displays is MyCMT__c.MyPath__c.\n(3) Access checks run when the page is loaded.\n(4) But the checks aren’t run in system mode, which is the standard Visualforce behavior. Users without permission to the custom metadata type can’t display the Visualforce page because Visualforce reinitiates the access check.\n\nIn this scenario, if a user isn’t allowed permission to the custom metadata type, there are two workarounds. You can create a string for each object, which can be passed through, or create a wrapper class. Use these options instead of assigning a variable such as MyCMT__c, then rendering myCMT.Path__c myCMT.Name. For example,\n\nclass DataHolder{\npublic string path {get;set;}\npublic boolean active {get;set;}\n}\n\nWhen you load the rows into a collection, the Visualforce checks are bypassed because the type is a data type instead of an sObject.\n\nHere’s an example that includes the @AuraEnabled annotation for an Aura or Lightning component controller.\n\nclass with sharing MyController {\n    @AuraEnabled\n    public static List<My__mdt> thisWillNotWork() {\n         return [select developername from my__mdt];\n    }\n    @AuraEnabled\n    public static List<String> thisWill() {\n        List<String> retVal = new List<String>();\n        for(My__mdt config: [select developername from my__mdt]) {\n            retVal.add(config.DeveloperName);\n        }\n        return retVal;\n    }\n}\nRetrieving Custom Metadata Type Information\n\nWhen you retrieve custom metadata type records or a count of custom metadata types, the number returned by SOQL, Apex, formulas, flows, or APIs can differ from the number in the user interface. This difference is because of the custom metadata type visibility settings and the access that a user has to the type based on profiles and permissions.\n\nSEE ALSO\nControl Read Access to Custom Metadata Types\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Custom Metadata Type Management",
    "keywords": [
        "custom metadata",
        "metadata management",
        "salesforce security",
        "metadata visibility",
        "security settings",
        "organization preferences"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.extend_code_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.work_with_apis.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.monitor_rate_limit.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.writing_code.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_dev_console.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_dev_console_tab_query_editor.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_dev_console_navigating.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_dev_console_navigating_menubar.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_dev_console_navigating_logs_panel.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.working_with_code.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_about.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.pages_about.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.pages_pages.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.pages_custom_components.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.pages_static_resources.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.aura_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.securing_your_code.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_package_security.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.pages_page_level_security.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_email_services.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.cl_about.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.dev_scontrol.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.custommetadatatypes_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.custommetadatatypes_metadata_api.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.custommetadatatypes_relationships.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.custommetadatatype_validation.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.custommetadatatypes_package_install.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.canvas_app_previewer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.action_link_group_template.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.remoteaccess_request.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.custom_perms_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.remoteaccess_identity_iot.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.debugging_your_code.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_dev_console_view_system_log.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_dev_console_perspectives.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_debug_log.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.testing_your_code.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.code_test_execution.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.custommetadatatypes_permissions.htm&language=en_US&type=5"
    ],
    "embedding": [
        -0.4544796943664551,
        0.5882669687271118,
        -0.2141297161579132,
        -0.24829089641571045,
        -0.6065669655799866,
        -0.346254825592041,
        -0.6011955738067627,
        0.11283358931541443,
        0.1865980327129364,
        -0.12076474726200104,
        0.11329182982444763,
        -1.0047144889831543,
        -0.12502388656139374,
        -0.4498859643936157,
        0.24350658059120178,
        0.029229890555143356,
        0.5276966094970703,
        0.002179676666855812,
        0.7215931415557861,
        -0.35131680965423584,
        -0.1686287522315979,
        -0.900580644607544,
        0.39051592350006104,
        0.9670716524124146,
        -0.0482732355594635,
        1.4615895748138428,
        0.9227060079574585,
        -0.2511747479438782,
        0.24581965804100037,
        -0.2152915745973587,
        0.0871780663728714,
        0.0287097729742527,
        -0.14771665632724762,
        -0.35864248871803284,
        -0.28499075770378113,
        -0.49948304891586304,
        -0.7345358729362488,
        -0.3962273597717285,
        0.9250658750534058,
        -0.06918470561504364,
        -0.06798849999904633,
        0.06763117015361786,
        -0.11900302767753601,
        -0.22068637609481812,
        -0.5652567744255066,
        -1.1613186597824097,
        -0.4498525857925415,
        0.40283113718032837,
        -0.22327828407287598,
        0.9070321321487427,
        -0.9362850189208984,
        4.4223809242248535,
        0.5880980491638184,
        0.6110773086547852,
        0.65045565366745,
        0.27023717761039734,
        1.0386157035827637,
        0.11415424942970276,
        -0.06352514028549194,
        0.12639178335666656,
        -0.7031735181808472,
        0.8595613837242126,
        -0.03722883760929108,
        -0.3239322900772095,
        0.16514933109283447,
        0.049860622733831406,
        0.5723769664764404,
        0.12379893660545349,
        0.20056548714637756,
        0.38122430443763733,
        -1.3698910474777222,
        -0.48910731077194214,
        0.3785700500011444,
        -0.18997016549110413,
        1.052261471748352,
        -0.08026639372110367,
        -0.4121590852737427,
        0.19535821676254272,
        0.25825345516204834,
        0.29920822381973267,
        -0.6149247884750366,
        -0.4516527056694031,
        0.17349624633789062,
        0.5530665516853333,
        -0.3187454342842102,
        0.35135361552238464,
        0.07635119557380676,
        -0.16281822323799133,
        -0.5042206048965454,
        0.0932343602180481,
        -0.11299844086170197,
        0.11598816514015198,
        -0.401493638753891,
        -0.5467987060546875,
        -0.3424610495567322,
        -0.08378325402736664,
        0.17311295866966248,
        0.37096506357192993,
        -0.6629544496536255,
        0.6721378564834595,
        0.5216160416603088,
        0.3480842113494873,
        -0.8432480692863464,
        0.4949239492416382,
        -0.1544857621192932,
        -0.11852405965328217,
        0.43783265352249146,
        -0.4326760768890381,
        -0.21884214878082275,
        -0.22224290668964386,
        0.4150865077972412,
        -0.30851447582244873,
        0.2840479016304016,
        -0.33283478021621704,
        0.24555739760398865,
        -0.25489330291748047,
        0.8145924806594849,
        0.2583085298538208,
        0.24461416900157928,
        0.2282259166240692,
        0.10528787970542908,
        0.6624907851219177,
        0.08528947830200195,
        -0.49171125888824463,
        -0.6538285613059998,
        -0.1805553436279297,
        0.18659481406211853,
        0.07998955994844437,
        0.37968727946281433,
        0.32686445116996765,
        -0.632785975933075,
        -0.12302336096763611,
        0.07871740311384201,
        -0.24694734811782837,
        -0.620436429977417,
        0.3774925172328949,
        0.05561874434351921,
        -0.9094157814979553,
        0.009186085313558578,
        -0.41335228085517883,
        0.024104632437229156,
        -0.0645914077758789,
        1.0814138650894165,
        0.03279324993491173,
        0.23115766048431396,
        0.3818550109863281
    ]
}