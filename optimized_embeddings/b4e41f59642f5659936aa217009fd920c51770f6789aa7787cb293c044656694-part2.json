{
    "id": "b4e41f59642f5659936aa217009fd920c51770f6789aa7787cb293c044656694-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.mc_overview_create_byok.htm&language=en_US&type=5",
    "content": "nullMarketing Cloud Engagement\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n Marketing Cloud Engagement\n Marketing Cloud Engagement Glossary\n Marketing Cloud Engagement Tenant Types\n Marketing Cloud Engagement Setup\n Setup Assistant\n Limits and Guidelines\n Password Management\n Account Settings in Marketing Cloud Engagement\n Feature Settings\n Security Settings for Marketing Cloud Engagement\n Marketing Cloud Roles and Permissions\n Marketing Cloud Engagement Users\n Business Units in Marketing Cloud Engagement\n Alert Manager\n Assign a Role to All Business Unit Users\n SFTP Accounts in Marketing Cloud Engagement\n File Locations\n Marketing Cloud Key Management\n Create an Encryption Key for Marketing Cloud Engagement\n Use a Created Key with AMPscript\n Use a Created Key with File Transfer Activities\n Bring Your Own Key for Encryption at Rest\n Create Your Own Encryption Key\n Build OpenSSL Version for Encryption Keys\n Import an Encryption Key\n Rotate an Encryption Key in Marketing Cloud\n Delete an Encryption Key\n Revoke an Encryption Key\n Restore an Encryption Key in Marketing Cloud\n Validate Your Own Encryption Key\n Create an SSH Key to Use with Marketing Cloud Engagement SFTP\n Manage Parameters\n Tags\n BrandBuilder for Marketing Cloud Engagement\n Single Sign-On Authentication Using SAML 2.0 for Marketing Cloud...\n Account Login Access\n SSL Certificates for Custom Domain Security\n Determine Your Marketing Cloud Engagement Instance\n Browser Support\n IP Addresses for Inclusion on Allowlists in Marketing Cloud Engagement\n Marketing Cloud Engagement Data Protection and Privacy Tools\n Types of Data Usage in Marketing Cloud Engagement\n Marketing Cloud Engagement User Preferences\n Calendar in Marketing Cloud Engagement\n Event Notification Service\n Package Manager in Marketing Cloud Engagement\n Slack Integration for Marketing Cloud Engagement\n Field-Level Encryption in Marketing Cloud Engagement\n Tokenized Sending\n Data at Rest Encryption in Marketing Cloud Engagement\n Marketing Cloud Engagement Shield\n Expired Marketing Cloud Engagement Subscriptions\n Suspended Marketing Cloud Engagement Accounts\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nSET UP MARKETING CLOUD ENGAGEMENT\nCreate Your Own Encryption Key\n\nYou can create an encryption key in Marketing Cloud Engagement, using multiple keys for the creation and wrapping process. You provide the wrapped version of the Intermediate Key and Private Key. Use Base64 encoding for the wrapped keys before you import them.\n\nAlways keep backups of your created key values. Engagement doesn’t retain revoked or deleted key values. This key is required to decrypt data in the messaging platform database.\n\nKEY NAME\tTYPE\tFILE FORMAT\tKEY WRAPPING ALGORITHM\nSalesforce Wrapping Key\tRSA 4096 Public Key\tPEM (PKCS #8)\tN/A\nIntermediate Key\tAES 256\tBinary (bytes)\tOAEP with SHA256 and MGF1 padding - wrap the Intermediate Key with the Salesforce Wrapping Key\nPrivate Key\tRSA 2048 Private-Public Key Pair\tDER (PKCS #8)\tAES key wrap with padding and Alternate Initial Value (RFC 5649) - wrap the Private Key with the Intermediate Key\n\nThese steps show how to generate and wrap key files using OpenSSL. We recommend OpenSSL 3.0. These example steps aren’t always suitable for a production environment. A patch is required to enable AES key wrapping on OpenSSL 1.1.1.\n\nHover over your name and click Setup.\nType Bring Your Own Key in the search field and click Bring Your Own Key.\nClick New Key and select Import Wrapped Key.\nCopy the RSA public key value from the Wrapping Key field. You can click  next to the text field. Store the key in a file called salesforce_rsa_pub for later use. The public key remains the same value regardless of key type.\nEngagement generates an RSA 4096 for each enabled account. Access the public key value through the Wrapping Key field displayed on the Import Wrapped Key page. The corresponding private key is stored in a non-exportable configuration for unwrapping purposes.\nCreate an AES 256 intermediate key. This command generates an AES256 key in binary format with 32 random bytes.\nCommand:\nopenssl rand -out aeskey.bin 32\nConvert the binary AES key into HEX format. This example uses the xxd tool to perform the conversion.\n\nCommand:\n\nxxd -plain -c 100 aeskey.bin > aeskey.hex\n\nTo view the hex format, enter type aeskey.hex in Command Prompt or cat aeskey.hex in bash.\n\nSample Expected Output:\n\n137c4fe6a7d08341e7756fd02050fff513e1d92ff464c35977d650b81f67a73f\nEncrypt the intermediate AES key from aeskey.bin created in step 5 with the Salesforce RSA key from salesforce_rsa_pub created in step 4. Use OAEP with SHA256 and MGF1 Padding. Store the output in a file called oaep_wrapped_intermediate_aes_key.\nCommand:\nopenssl pkeyutl -in aeskey.bin -encrypt -pubin -inkey salesforce_rsa_pub -pkeyopt rsa_padding_mode:oaep -pkeyopt rsa_oaep_md:sha256 -pkeyopt rsa_mgf1_md:sha256 > oaep_wrapped_intermediate_aes_key\nGenerate your RSA 2048 public-private keypair. Import this key value for use as the key encryption key. Store this key in a safe and secure location.\nCommand:\nopenssl genrsa -out customer_key_private.pem 2048\nConvert the RSA key into pkcs#8 format and save it in a file named customer_key.der.\nCommand:\nopenssl pkcs8 -topk8 -inform pem -in customer_key_private.pem -outform der -nocrypt -out customer_key.der\nEncrypt the RSA key with the intermediate AES key. Use the AES key value from step 6 in the command when replacing the <YOURAESKEYVALUE> string.\nCommand:\nopenssl enc -id-aes256-wrap-pad -nosalt -in customer_key.der -K <YOURAESKEYVALUE> -iv A65959A6 > aes_wrapped_user_rsa_key\nSample Command:\nopenssl enc -id-aes256-wrap-pad -nosalt -in customer_key.der -K 94607bc6e0078bc1e07a99fafb37f494933b8b8cff085ac308fdbaed988642f8 -iv A65959A6 > aes_wrapped_user_rsa_key\nStore the intermediate AES wrapped key in a file called oaep_wrapped_intermediate_aes_key.b64.\nCommand:\nopenssl base64 -in oaep_wrapped_intermediate_aes_key -out oaep_wrapped_intermediate_aes_key.b64\nStore the wrapped RSA key in a file called aes_wrapped_user_rsa_key.b64\nCommand:\nopenssl base64 -in aes_wrapped_user_rsa_key -out aes_wrapped_user_rsa_key.b64\nBuild OpenSSL Version for Encryption Keys\nMarketing Cloud Engagement uses the OpenSSL software library to generate and wrap encryption keys. A patch is required to enable AES key wrapping on OpenSSL 1.1.1.\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Creating Your Own Encryption Key in Marketing Cloud Engagement",
    "keywords": [
        "Encryption Key",
        "Key Wrapping Algorithm",
        "OpenSSL",
        "RSA 4096",
        "AES 256",
        "Base64 Encoding"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_marketing_cloud.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_administration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_limits.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_password_management.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_view_account_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_global_marketing_cloud_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_headers_footers.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_feature_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_email_studio_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_sender_authentication_package.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_domain_verification.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_domain_verification_faq.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_from_address_management.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_domain_registration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_reply_mail_management.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_enterprise_reply_mail_management.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_send_classifications.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_send_emails_from_multiple_addresses.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_url_expiration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_mobile_studio_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_mobileconnect_account_administration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_setting_the_from_name_for_your_mobileconnect_account.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_setting_stored_headers_and_footers_for_mobileconnect_messages.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_send_blockouts.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_managing_keywords_on_short_and_long_codes_in_your_mobileconnect_accounts.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_help_keywords.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_stop_keywords.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_bounced_messages_and_held_numbers.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_conversation_windows.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_moc_dlt_template_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_mobilepush_administration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_mp_provisioning_info.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_mp_apps_and_optional_settings_in_your_mobilepush_account.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_mp_send_blockouts_in_your_mobilepush_accounts.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_security_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_mfa.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_ip_allowlist.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_export_email_allowlist.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_audit_trail.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_roles.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_roles_assign_a_role.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_roles_permissions_use_cases.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_permissions_es.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_journey_builder_roles.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_mobileconnect_roles.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_mobilepush_roles.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_marketing_cloud_roles.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_users.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_business_units.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_enterprise_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_enterprise_20_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_customized_local_content.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_ftp_accounts.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_file_locations.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_key_management.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_byok.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_create_byok.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_parameter_management.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_brandbuilder.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_single_sign_on_authentication_via_saml_2.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_enable_saml_task.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_account_login_access.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_ssl_certificates.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_es_ip_addresses_for_inclusion.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_user_pref.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_timezone.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_mc_calendar.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_ens.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_marketing_cloud_package_manager.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_manage_packages_across_environments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_pm_industry_solutions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_package_manager_reference.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_field_level_encryption.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_field_level_encryption_faqs.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_tokenized_sending1.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_resolve_token_api_specification.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.mc_overview_byok_openssl.htm&language=en_US&type=5"
    ],
    "embedding": [
        0.7359393835067749,
        -0.6121978163719177,
        -0.27342382073402405,
        -0.3919511139392853,
        0.23661936819553375,
        0.5138442516326904,
        -0.9630271196365356,
        0.33244752883911133,
        0.026927977800369263,
        -0.45424336194992065,
        -0.19962577521800995,
        -0.11675795167684555,
        0.04888970032334328,
        -0.02639930322766304,
        0.06508495658636093,
        0.19462835788726807,
        -0.7560350298881531,
        0.607292652130127,
        -0.3030887544155121,
        0.41997230052948,
        0.19388265907764435,
        -0.7315106987953186,
        1.3149704933166504,
        0.4583146870136261,
        -0.9347988963127136,
        -0.29950082302093506,
        0.2541217505931854,
        0.2684509754180908,
        0.35424625873565674,
        0.5855668783187866,
        0.16194280982017517,
        -0.27473583817481995,
        -0.15467579662799835,
        0.27691370248794556,
        -0.48959165811538696,
        -0.24519358575344086,
        0.502898097038269,
        0.30120983719825745,
        -1.420717477798462,
        0.45495402812957764,
        -0.7699773907661438,
        0.008780126459896564,
        0.6313108801841736,
        -0.22034575045108795,
        0.2929910719394684,
        -0.0067499130964279175,
        0.5412167310714722,
        0.26421672105789185,
        0.0007018670439720154,
        0.9218150973320007,
        -0.6420827507972717,
        0.1747746616601944,
        0.43902334570884705,
        -0.2571468949317932,
        -0.02066192403435707,
        -0.49903470277786255,
        0.5694306492805481,
        0.2766662836074829,
        0.7196367383003235,
        0.23476728796958923,
        -0.33849090337753296,
        0.44667237997055054,
        -0.8040867447853088,
        -0.7358735203742981,
        -0.15316210687160492,
        0.5581883192062378,
        -0.2465936243534088,
        -0.39864176511764526,
        -0.4148191511631012,
        -0.3259642720222473,
        0.301810085773468,
        0.1643718034029007,
        -0.2621890902519226,
        0.004783269017934799,
        -0.045369453728199005,
        -0.006152652204036713,
        -0.17204715311527252,
        0.31255125999450684,
        0.2658410370349884,
        0.06667174398899078,
        0.2441009283065796,
        -0.8654847741127014,
        0.03371584415435791,
        -0.37956205010414124,
        -0.7892641425132751,
        -0.896717369556427,
        0.11512969434261322,
        -0.07869663834571838,
        -0.6683167815208435,
        -0.8690409064292908,
        -0.5518649220466614,
        -0.5624836683273315,
        -0.2373150885105133,
        -0.040364522486925125,
        -0.4184058904647827,
        -0.623984158039093,
        0.05151773989200592,
        1.1516119241714478,
        0.859222948551178,
        0.12044987082481384,
        0.3593713641166687,
        0.7795661687850952,
        0.8598860502243042,
        -0.42135846614837646,
        0.8364346027374268,
        0.005687335506081581,
        0.8663911819458008,
        0.16399723291397095,
        0.17695043981075287,
        0.044955335557460785,
        -0.5126397609710693,
        0.846236526966095,
        -0.89848393201828,
        0.33020254969596863,
        -0.34032079577445984,
        -0.6135703921318054,
        0.14774374663829803,
        0.5569977164268494,
        -0.6265169382095337,
        -0.644968569278717,
        -0.01530100405216217,
        -0.11489644646644592,
        -0.5524027943611145,
        -0.1958547830581665,
        -0.6487694382667542,
        -0.3175741732120514,
        -0.44815945625305176,
        0.2718779146671295,
        0.35385480523109436,
        -1.198074221611023,
        3.950617790222168,
        0.592144787311554,
        -0.05488002300262451,
        0.8991287350654602,
        0.10853375494480133,
        0.9304537773132324,
        0.34014490246772766,
        0.005832094699144363,
        0.16403597593307495,
        -1.2014498710632324,
        -0.08147728443145752,
        -0.3149825632572174,
        1.053254246711731,
        0.29956936836242676,
        -0.23370546102523804,
        0.14062605798244476,
        0.08160685002803802,
        -0.196836918592453,
        0.38365480303764343,
        -0.7929454445838928,
        -0.7341347932815552,
        -0.5046992301940918,
        -0.36657851934432983,
        0.8156695365905762,
        0.5836950540542603,
        -0.7152984738349915,
        -0.046749576926231384,
        0.1305398941040039,
        0.24969089031219482,
        0.21082496643066406,
        -0.07049162685871124,
        -0.012645963579416275,
        0.19659002125263214,
        -0.4351397156715393,
        -0.4663771390914917,
        0.3422642648220062,
        0.47087424993515015,
        0.14874468743801117,
        0.5078171491622925,
        -0.09086354821920395,
        0.03299742937088013,
        -0.020347706973552704,
        -0.4578082263469696,
        -0.40685442090034485,
        -0.0003686044365167618,
        1.168832778930664,
        0.26470738649368286,
        0.5129173994064331,
        0.2080591320991516,
        -0.42602649331092834,
        -0.09693841636180878,
        -0.6801428198814392,
        -0.11779054999351501,
        -0.5492267608642578,
        -0.19515463709831238,
        0.10016835480928421,
        -0.12775574624538422,
        0.22970731556415558,
        0.9644055962562561,
        0.11339396238327026,
        -0.3946317434310913,
        -0.050618767738342285,
        -0.40024232864379883,
        -0.15766310691833496,
        -0.7741213440895081,
        -0.14039108157157898,
        0.23416070640087128,
        1.0885380506515503,
        -0.07854360342025757,
        -1.023087501525879,
        -0.1587463766336441,
        -1.079100251197815,
        -0.9073870182037354,
        0.03737613558769226,
        0.8456776142120361,
        -0.2268541157245636,
        0.7002511024475098,
        0.367782324552536,
        0.055084433406591415,
        -0.22599567472934723,
        0.5663508176803589,
        0.5094919204711914,
        -0.6790100932121277,
        0.26857900619506836,
        -0.11597628891468048,
        0.7034893035888672,
        0.2522410452365875,
        0.2306349277496338,
        0.012102052569389343,
        0.6923239827156067,
        0.5891363620758057,
        0.054011277854442596,
        0.14576131105422974,
        -0.49400317668914795,
        0.39625081419944763
    ]
}