{
    "id": "060895dabe26c077eea87e2d9f2b30d3fe279d1df862ff3f47df51944080c63b-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_transformation_formula.htm&language=en_US&type=5",
    "content": "nullSalesforce Data Pipelines\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n Salesforce Data Pipelines\n Get Familiar with Salesforce Data Pipelines\n Set Up Salesforce Data Pipelines\n Modify and Enrich Data with Recipes\n Connect and Sync Your Data to Data Pipelines\n Clean, Transform, and Load Data with Data Prep\n Data Prep Access Based on Your User Type\n Create a Recipe with Data Prep\n Nodes for Data Prep Recipes\n Transformations for Data Prep Recipes\n Bucket Transformations: Categorize Column Values\n Cluster Transformation: Segment Your Data\n Data Type Conversion Transformations: Convert Column Types\n Date and Time Transformations: Calculate on Date Fields\n Detect Sentiment Transformation: Determine the Sentiment of Text\n Drop Columns Transformation: Drop Columns from the Recipe\n Discovery Predict Transformation: Get Einstein Discovery Predictions\n Extract Transformation: Get a Date Component\n Edit Attributes Transformation: Change the Column Names and Value...\n Flatten Transformation: Flatten Hierarchies\n Format Dates Transformation: Standardize the Date Format in a Column\n Formula Transformation: Create a Calculated Column Based on an...\n Date Functions for Formulas\n Numeric Operators and Functions for Formulas\n String Functions for Formulas\n Window Functions for Formulas\n Multivalue Functions for Formulas\n Additional Functions for Formulas\n Predict Missing Values Transformation: Fill In Missing Values\n Split Transformation: Break Up Column Values\n Time Series Forecasting Transformation: Forecast Measures\n Connect and Reorganize Nodes or Branches in a Recipe\n Copy and Paste a Recipe\n Keyboard Shortcuts for Building Data Prep Recipes\n Manage Recipes\n Preview Results in a Data Prep Recipe\n Profile Columns to Understand Data in a Data Prep Recipe\n Run Jobs to Create and Refresh Datasets\n Get Started Faster with Data Templates\n View Data Sources and Targets\n View Data Pipeline Usage\n Query Datasets with the Query API Endpoint\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nSALESFORCE DATA PIPELINES\nFormula Transformation: Create a Calculated Column Based on an Expression\n\nIn Salesforce Data Pipelines, create a column in a Data Prep recipe that displays values based on a formula calculation. The calculation can include input from other fields in the same row or across rows. For example, you can create a Profit column based on input from Revenue and Cost columns. Enter formulas in EA-SQL format. EA-SQL is a collection of standard and custom functions for numeric, string, and date data.\n\nREQUIRED USER PERMISSIONS\nUSER PERMISSIONS\nNEEDED\nTo create a recipe:\tEdit CRM Analytics Dataflows OR Edit Dataset Recipes\nFormula Transformation: Create a Calculated Column Based on an Expression\nIn a Transform node of a Data Prep recipe, select a column in the Preview tab.\nTo create the formula for the calculated column, select the Formula button () in the Transform toolbar and select Custom Formula.\nIn the formula editor, enter the formula and add parameters using the correct syntax.\n\nAs you type in the formula editor, functions and columns matching the name appear for you to select to add to the formula.\n\nNOTE The best practice is to use double quotes around all column names. For a value that is a string literal, use single quotes. .\n\nDouble quotes are required when referencing dataset columns that share a name with reserved keywords.\n\nTo get help, check out all functions and columns in the Functions and Columns tabs. To add one to the formula, select it and click +.\n\nFunctions are listed in the Functions tab by category: Window Functions, String Functions, Numeric Functions, Date/Time Functions, and Additional Functions. To view the window functions, enable Multiple row formula.\n\nFor formulas with window functions, specify the column used to partition the rows in Partition By, column used to sort the data in Order By, and sort direction in Sort Direction.\n\nFor example, set Partition By to Opportunity Name, Order By to Last Modified Date, and Sort Direction to Ascending. Based on these settings, the transformation combines all records into partitions (think buckets) based on the same opportunity name. It then sorts the records in each partition in ascending order based on the last modified date.\n\nIdentify each column in the formula by its API name. Type in the API name or select the column from the Columns tab.\nIn Output Type, select whether the calculated column’s data is text, numeric, date, or datetime.\nBased on the output type, you can set these attributes.\nATTRIBUTE\tDESCRIPTION\nPrecision\t\n\nThe maximum number of digits in a numeric (measure) column. Includes all numbers to the left and to the right of the decimal point (but excludes the decimal point character). Enter an integer from 1 through 18, inclusive. If a numeric value exceeds the specified precision, the value is set to 0 or null, depending on whether null measure handling is enabled. For example, if precision is set to 5 and null measure handling is enabled, the numeric value 123456.78 is replaced with null.\n\n\nScale\t\n\nThe number of digits to the right of the decimal point in a numeric column. Enter an integer from 0 through 17, inclusive. The scale must be less than the precision. For example, if the numeric value is 123456.789 and you set the scale to 2, the number appears as 123456.78.\n\n\nLength\t\n\nThe maximum number of characters in a text (dimension) column. Enter an integer from 1 through 32000, inclusive. The default length is 255 characters.\n\n\nDate Format\t\n\nThe date format of a date column.\n\nIn Default Value, choose the value to show if your expression returns no results.\nIf needed, you can change the label of the calculated column.\nTo add the formula as a step in the Transform node, click Apply.\n\nThe calculated column appears in the recipe preview.\n\nTo view the Graph area, click the Collapse button ().\nSave the recipe.\n\nYou can bucket a formula column or reference it in later formulas defined in the recipe. Common functions have their own buttons in the Transform toolbar that automatically fill in the formula with the column and predefined syntax. The toolbar shows appropriate functions based on the type and number of selected columns. To use one, click the function button in the Transform toolbar (1). The formula is started for you (2), using the column and function you selected.\n\nDate Functions for Formulas\nIn Salesforce Data Pipelines, use date functions to adjust or calculate values from dates in your recipe. For example, you can add time, find time until, and extract a day of the week from date fields. The arguments for date functions are date columns.\nNumeric Operators and Functions for Formulas\nIn Salesforce Data Pipelines, use numeric functions to calculate values from numbers in your recipe. For example, you can round, truncate, and determine the absolute value of a number. The arguments for numeric functions can be number values or columns.\nString Functions for Formulas\nUse string functions to create values based on other strings. For example, you can change the casing of text strings, concatenate values from multiple columns, and replace values. The arguments for string functions must be text strings or dimension fields.\nWindow Functions for Formulas\nIn Salesforce Data Pipelines, use window functions in a Data Prep recipe to perform calculations across rows. For each row of input data, perform a calculation on a selection—or window—of related rows. Unlike aggregation that groups rows, window functions return a result for each row. For example, you can calculate the changes to the opportunity amount throughout the stages of each opportunity to see if you can hit your sales target.\nMultivalue Functions for Formulas\nIn Salesforce Data Pipelines, use multivalue functions with your multivalue data. For example, look for a specific value, count how many values there are, create a new multivalue by combining other text, convert a multivalue to a string, or split a string and return a multivalue. The arguments for multivalue functions must be text strings or fields.\nAdditional Functions for Formulas\nIn Salesforce Data Pipelines, these versatile functions can be used with the data types text, number, date_only, and datetime to build logic into your formulas.\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Formulas in Salesforce Data Pipelines",
    "keywords": [
        "data pipeline",
        "formula transformation",
        "calculated column",
        "EA-SQL",
        "numeric functions",
        "date functions",
        "string functions",
        "window functions",
        "multivalue functions",
        "additional functions"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.sdp.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_get_familiar.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_get_oriented.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_setup.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_integrate_data_prep_troubleshooting.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_enrich_data_with_recipes.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_salesforce_local.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_remote.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_salesforce_group.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_application_group.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_integrate_connectors_database_group.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_object_store_nosql_group.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_pilot_beta.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_output_connectors.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_output_salesforce.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_connectors_output_snowflake.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_replication.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_schedule_run_monitor_replication.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_data_prep_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_create.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_nodes_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_add_input_data.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_aggregate.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_join_data.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_join_operations.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_output_results.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_transformations_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_transformations_bucket.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_convert_column_types.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_transformation_date_and_time.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_transformation_detectSentiment.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_transformation_formula.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_stringFunctions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_integrate_data_prep_recipe_manage_monitor.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_integrate_run_schedule_jobs.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_integrate_data_prep_recipe_run.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_data_templates_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_data_templates_collection_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_template_sentiment_analysis.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_dateFunctions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_numericFunctions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_windowFunctions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_multivalueFunctions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sdp_recipe_additionalFunctions.htm&language=en_US&type=5"
    ],
    "embedding": [
        -0.17864958941936493,
        0.7699077129364014,
        -0.35868245363235474,
        -0.1598607897758484,
        -0.23640185594558716,
        0.31587231159210205,
        -0.18632565438747406,
        -0.1703861802816391,
        0.28973886370658875,
        -0.4748104214668274,
        -0.5493029356002808,
        -0.742564857006073,
        -0.12241986393928528,
        -0.6858003735542297,
        0.23759929835796356,
        0.332352876663208,
        -0.5692073702812195,
        -0.4752160608768463,
        0.8984540700912476,
        0.03338012099266052,
        -0.07973887026309967,
        -0.2003079652786255,
        0.562192440032959,
        -0.12399852275848389,
        0.8775849938392639,
        0.48752936720848083,
        -0.21353673934936523,
        -0.6933683156967163,
        0.49794477224349976,
        -0.4832804799079895,
        -0.4646923243999481,
        -0.9549756646156311,
        0.12918686866760254,
        -0.6042582392692566,
        0.7267787456512451,
        -0.5402934551239014,
        0.24871453642845154,
        0.24755530059337616,
        0.1730910986661911,
        -0.824835479259491,
        -0.23777902126312256,
        0.4276386797428131,
        -0.22340701520442963,
        0.3957935869693756,
        0.3140859603881836,
        -0.19539675116539001,
        0.4427497088909149,
        -0.5601033568382263,
        -0.11873625963926315,
        -0.1652783453464508,
        0.011743834242224693,
        -0.6827104091644287,
        0.01087239384651184,
        0.21441532671451569,
        -0.8125969767570496,
        0.13640135526657104,
        -0.45842888951301575,
        -0.16720426082611084,
        -0.31796330213546753,
        -0.6948999166488647,
        -1.3272106647491455,
        0.9322591423988342,
        -0.05957626923918724,
        0.8547356724739075,
        -0.20247352123260498,
        -0.9004225730895996,
        -0.5792461633682251,
        0.9582797884941101,
        0.34982046484947205,
        -0.3572002053260803,
        1.1826521158218384,
        0.436553418636322,
        -0.17968963086605072,
        0.5002825260162354,
        -0.1208740770816803,
        0.2636566162109375,
        0.47657904028892517,
        0.362847238779068,
        0.2787801921367645,
        0.44826430082321167,
        -0.09263092279434204,
        -0.5178166031837463,
        -0.4487699866294861,
        1.2104175090789795,
        -0.46024858951568604,
        -0.2428537756204605,
        0.2966849207878113,
        -0.2898044288158417,
        -0.9266825318336487,
        0.4224030673503876,
        -0.49837565422058105,
        0.3391243815422058,
        -0.4769725799560547,
        0.10638147592544556,
        0.4636312425136566,
        -0.4193514287471771,
        4.220607757568359,
        1.2483763694763184,
        0.5838173031806946,
        0.17192701995372772,
        0.346964031457901,
        0.6623070240020752,
        -0.361010879278183,
        -0.4691314697265625,
        -0.27267172932624817,
        -0.3224022090435028,
        0.6642276644706726,
        -0.30679851770401,
        -0.2630389928817749,
        0.25653597712516785,
        -0.18208301067352295,
        0.4387190639972687,
        -0.4798850417137146,
        -0.36924561858177185,
        -0.0035969391465187073,
        -0.9331334233283997,
        -1.228166103363037,
        0.7152351140975952,
        0.3059638440608978,
        0.9849979281425476,
        0.187699556350708,
        0.6603303551673889,
        0.5486422181129456,
        -0.1181485578417778,
        -0.5212100744247437,
        -0.6616340279579163,
        0.5956305861473083,
        -0.6468706130981445,
        0.037536587566137314,
        0.2851800322532654,
        0.15981191396713257,
        0.7018201351165771,
        0.21980297565460205,
        -0.2424003779888153,
        -0.18284019827842712,
        -0.47206467390060425,
        0.45012086629867554,
        0.07466848939657211,
        -0.6378509998321533,
        -0.3402893543243408,
        -0.42434316873550415,
        0.25142455101013184,
        -0.16168174147605896,
        0.40654540061950684,
        0.451933354139328,
        -0.9533294439315796,
        0.2133234292268753,
        -0.4108440577983856,
        0.5716091394424438,
        -0.07299438118934631,
        -1.0186972618103027,
        0.6786406636238098,
        0.12284301966428757,
        -0.20267488062381744,
        0.11266608536243439,
        1.016709804534912,
        0.9597256183624268,
        0.511197030544281,
        -0.37293118238449097,
        1.09574556350708,
        -0.078754723072052,
        0.2678319811820984,
        0.4482419788837433,
        0.19307439029216766,
        -0.5262428522109985,
        -0.09827176481485367,
        -0.3950248658657074,
        -0.3880566656589508,
        -0.7291019558906555,
        -0.9744707942008972,
        -0.20630770921707153,
        0.1982174813747406,
        0.10102181136608124,
        -0.04578593745827675,
        0.24235597252845764,
        -0.8583554625511169,
        0.6912381649017334,
        0.6904875040054321,
        -0.46099793910980225,
        -0.1870775669813156,
        0.19333039224147797,
        0.5387712717056274,
        -0.4479278028011322,
        0.22966066002845764,
        0.2483794093132019,
        0.10586842149496078,
        0.44742825627326965,
        0.292269766330719,
        -0.2780226171016693,
        -0.5278193354606628,
        0.512019157409668
    ]
}