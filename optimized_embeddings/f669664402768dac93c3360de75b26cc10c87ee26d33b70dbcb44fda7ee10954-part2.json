{
    "id": "f669664402768dac93c3360de75b26cc10c87ee26d33b70dbcb44fda7ee10954-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.mc_as_using_the_query_activity.htm&language=en_US&type=5",
    "content": "nullJourneys and Automations in Marketing Cloud Engagement\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n Journeys and Automations in Marketing Cloud Engagement\n Email Client Privacy and Non-Subscriber Activity in Marketing Cloud...\n Automation Studio\n The Automation Studio Overview Page\n Automate Processes in Automation Studio\n Schedule an Automation\n Automation Studio Activities\n Start an Automation Studio Activity\n Send Email Activity\n Retrieving and Segmenting Data with a SQL Query Activity\n Build a SQL Query Activity\n Optimizing a SQL Query Activity\n Use Intermediate Tables to Optimize a Query\n Data Views\n SQL Query Examples\n SQL Reference\n Restart a Suspended SQL Query Activity\n Considerations When Importing a File\n How to Use the File Transfer Activity in Automation Studio\n Script Activity\n Filter Activity\n Data Extract Activity\n Verification Activity\n Mapping Contacts to Business Unit\n Automation Studio Activities Reference\n Wait Activity\n Einstein in Automation Studio\n Pause an Automation\n Skip an Automation\n Stop a Running Automation\n Copy an Automation\n Delete an Automation\n Automation Studio Errors\n Automation Studio Statuses\n Get Automation Studio Notifications\n Find Activity Configuration and Error Details\n Data Extension Storage Usage\n Automation History and Health\n Journeys and Messages\n Behavioral Triggers\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nJOURNEYS AND AUTOMATIONS\nRetrieving and Segmenting Data with a SQL Query Activity\n\nRetrieve and unify data across data extensions and system data views with SQL query activities. For example, you can prepare a subscriber list, view open and send history, or review automation and journey health.\n\nA query activity is ideal for clean, structured datasets where audiences have already been created. If you want to unify and segment a large dataset, we recommend using your own internal data warehouse or an application such as Salesforce Customer Data Platform.\n\nPlanning Your SQL Query Activity\n\nConsider the data that you want to collect and how you plan to use it. Review our query examples for ideas on how to get started.\n\nData Views\nSQL Query Examples\nBuilding Your SQL Query Activity\n\nIn Automation Studio, build a SQL query activity that retrieves the data that you’re interested in, and add it to an automation. Then optimize your query so that it doesn’t time out and fail.\n\nBuild a SQL Query Activity\nOptimizing a SQL Query Activity\nSQL Reference\nTrailhead: Query Data with SQL\nMonitoring Query Health\n\nBuild SQL query activities and automations to review the health of all your automations, including SQL query activities. You can also set up email or Slack notifications for automation errors so that you can react quickly to failures.\n\nData View: Automation Instance\nData View: Automation Activity Instance\nGet Automation Studio Notifications\nFixing Failed Queries\n\nUnderstand why your query failed and then troubleshoot it. If the query timed out, optimize it.\n\nAutomation Studio Errors\nOptimizing a SQL Query Activity\nRestart a Suspended SQL Query Activity\nResources\n\nThere are other ways to retrieve data from Marketing Cloud Engagement, such as data extracts and API calls. If you want to unify and segment a large dataset, we recommend checking out Salesforce Customer Data Platform.\n\nKnowledge Article: Best Practices for Gathering Data in Marketing Cloud Engagement\nData Extract Activity\nIntro to Marketing Cloud Engagement APIs\nTrailhead: Automation Studio Activities\nBuild a Customer Data Platform with Salesforce\nBuild a SQL Query Activity\nIn Automation Studio, build a SQL query activity that retrieves the data that you’re interested in, and then add it to an automation.\nOptimizing a SQL Query Activity\nSQL query activities time out after 30 minutes. You can prevent timeouts and failures by optimizing your SQL query activities. If your query consistently runs longer than 10 minutes, we recommend using a different tool, such as Salesforce Customer Data Platform, to transform your data.\nUse Intermediate Tables to Optimize a Query\nSplit large queries into smaller components to use with Automation Studio’s query activity.\nData Views\nQuery system data views using Automation Studio for up to six months of Marketing Cloud Engagement subscriber and journey information.\nSQL Query Examples\nLearn how to build effective SQL queries in Automation Studio by following use cases.\nSQL Reference\nGet SQL query information for Automation Studio’s SQL Query activity at a glance.\nRestart a Suspended SQL Query Activity\nWhen a SQL Query activity encounters a system error or fails 24 consecutive times, we suspend it. To find out why your query is suspended, check the action log.\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Retrieving and Segmenting Data with SQL Query Activities",
    "keywords": [
        "SQL",
        "Query Activity",
        "Automation Studio",
        "Data Views",
        "Segmentation",
        "Marketing Cloud Engagement",
        "Salesforce Customer Data Platform"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.mc_journeys_and_automations.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_automation_studio.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_using_the_automation_studio_overview_page.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_defining_an_automation.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_triggered_automations.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_schedule_an_automation.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_using_automation_studio_activities.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_send_email_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_using_the_query_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_data_views.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_sql_query_examples.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_use_an_import_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_using_the_file_transfer_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_create_a_script_activity_1.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_use_a_filter_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_use_a_data_extract_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_extract_types.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_tracking_extract.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_tracking_extract_output.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_create_an_audit_trail_data_extract_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_verification_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_wait_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_einstein_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_automation_studio_errors.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_automation_history_and_health.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_builder.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_optimize_sending_in_journey_builder.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journeys_dashboard.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_types.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_manage_single_send.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_multistep_journeys.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_create_multistep_journey.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_transactional_send_journeys.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_templates.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_create_shared_template.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_pause.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_entry_sources.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_data_extension.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_audience.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_inbound_chat_entry_source.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_entry_events.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_fire_event.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_admit_contacts_via_api.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_dmp.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_salesforce_data_event.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_person_accounts_salesforce_data_events.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_mobile_app_events.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_using_data_in_journey_builder.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_goals.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_message_activities.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_send_email_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_mobile_activities_in_journey_builder.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_whatsapp_chat_messaging.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_whatsapp_get_started.htm&language=en_US&type=5#mc_jb_whatsapp_get_started",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_whatsapp_set_up_account.htm&language=en_US&type=5#mc_jb_whatsapp_set_up_account",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_whatsapp_template_message_approval.htm&language=en_US&type=5#mc_jb_whatsapp_template_message_approval",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_whatsapp_default_session_messages.htm&language=en_US&type=5#mc_jb_whatsapp_default_session_messages",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_whatsapp_session_transfer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_canvas_activities.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_path_optimizer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_wait_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_split_join_activities.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_use_decision_splits.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_connect_data_extensions_for_decision_split_use.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_configure_eef_split.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_einstein_sto.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_update_a_contact.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_sales_service_cloud_activities.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_account_activity_sales_service.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_campaign_member_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_contact_activity_sales_service.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_convert_lead_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_object_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_task_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_legacy_activities.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_use_person_accounts_with_sales_and_service_cloud_activities.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_administration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_testing.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_organize_your_journeys.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_tags.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_versions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_analytics_and_history.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_journey_history.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_jb_behavioral_triggers.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_use_the_sql_query_activity.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_optimize_the_query_activity.htm&language=en_US&type=5#mc_as_optimize_the_query_activity",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_sql_reference.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_data_view_automation_instance.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_data_view_automation_activity_instance.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_get_automation_studio_notifications.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_restart_suspended_sql_query.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=000355942&language=en_US&type=1",
        "https://help.salesforce.com/s/articleView?id=sf.customer360_a.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.mc_as_use_intermediate_tables_to_optimize_a_query.htm&language=en_US&type=5"
    ],
    "embedding": [
        -0.8858969807624817,
        0.23646995425224304,
        1.0692393779754639,
        0.889896810054779,
        0.39042186737060547,
        -0.487049400806427,
        0.6111034750938416,
        0.6716633439064026,
        0.6255995035171509,
        -0.17134836316108704,
        0.7418631911277771,
        0.2063094675540924,
        -0.19562935829162598,
        0.23675470054149628,
        -0.23001724481582642,
        0.005423668771982193,
        -0.6044192314147949,
        0.07687009125947952,
        0.36000582575798035,
        -0.2123742550611496,
        0.37494611740112305,
        0.6780462265014648,
        -0.3519182503223419,
        0.507947564125061,
        0.3691951036453247,
        -0.04123399406671524,
        0.3743093013763428,
        0.01587788015604019,
        0.26153016090393066,
        0.414827823638916,
        -0.017191041260957718,
        -0.5587890148162842,
        0.014194183051586151,
        0.42111650109291077,
        0.5064481496810913,
        0.2795059084892273,
        0.035595498979091644,
        0.44384077191352844,
        0.026765238493680954,
        0.02466517686843872,
        -0.47067421674728394,
        0.9235794544219971,
        -0.3005214333534241,
        0.03370068222284317,
        0.44292861223220825,
        0.5086891055107117,
        -0.3182291090488434,
        -0.15098805725574493,
        1.0129332542419434,
        -0.22948434948921204,
        -0.9762932062149048,
        -0.39109131693840027,
        -0.3432045578956604,
        -0.47668132185935974,
        0.24703508615493774,
        0.3458150625228882,
        0.36709749698638916,
        -0.5831325650215149,
        0.08330674469470978,
        -0.043889403343200684,
        -0.3269503116607666,
        -0.44214972853660583,
        0.8819513320922852,
        0.200423926115036,
        0.8466966152191162,
        1.7436833381652832,
        0.2450053095817566,
        -0.4424743354320526,
        0.2751637399196625,
        -0.030082233250141144,
        -0.7218647599220276,
        -0.3429616391658783,
        0.47349900007247925,
        -0.54044109582901,
        0.012995876371860504,
        -1.1789079904556274,
        0.4929370880126953,
        0.6942791938781738,
        0.22075380384922028,
        -0.41390442848205566,
        0.005810044705867767,
        0.5707623362541199,
        -0.3184050917625427,
        -0.11004149913787842,
        0.4846971333026886,
        0.3315565288066864,
        0.17573431134223938,
        -0.5108374953269958,
        0.19066694378852844,
        -0.5617561936378479,
        1.1754682064056396,
        -0.057278916239738464,
        0.38705751299858093,
        0.1813860833644867,
        -0.8820455074310303,
        0.36921605467796326,
        -0.384915292263031,
        -0.8074805736541748,
        -0.16565486788749695,
        -0.8775981664657593,
        -0.8234667778015137,
        0.18703579902648926,
        0.2844713628292084,
        0.8698030114173889,
        -0.10594859719276428,
        -0.6517212390899658,
        0.254755437374115,
        0.6313655376434326,
        1.1515129804611206,
        -0.1438334584236145,
        0.9618099331855774,
        0.43130117654800415,
        0.49906450510025024,
        0.0976627767086029,
        -0.04157976433634758,
        -0.42103052139282227,
        -0.6441770195960999,
        -0.14877882599830627,
        0.8435068726539612,
        -0.25267595052719116,
        -0.21475593745708466,
        -0.5622636675834656,
        -0.27547702193260193,
        0.5042120218276978,
        0.038015641272068024,
        -0.07847798615694046,
        0.01783064752817154,
        -0.24678868055343628,
        -1.3393477201461792,
        0.00829342007637024,
        -0.5613774061203003,
        0.25918930768966675,
        0.034525856375694275,
        -0.5729364156723022,
        0.3905869722366333,
        -0.4512040317058563,
        4.117501258850098,
        0.8728299736976624,
        0.7378531098365784,
        -0.43301138281822205,
        0.11779413372278214,
        0.31819188594818115,
        0.43246087431907654,
        -0.8285413384437561,
        0.2941279411315918,
        -0.7062655091285706,
        0.41804441809654236,
        -0.32014966011047363,
        -0.3616545796394348,
        0.15670765936374664,
        -0.1545690894126892,
        0.5911371111869812,
        -0.18360522389411926,
        0.07051157206296921,
        0.5130581855773926,
        -0.7603215575218201,
        -0.8743564486503601,
        0.8712202906608582,
        -0.41045746207237244,
        0.6760330200195312,
        0.08444114774465561,
        -0.32326433062553406,
        0.44695785641670227,
        -0.5945980548858643,
        -0.1090332567691803,
        0.39634421467781067,
        0.4147813320159912,
        -0.5863974094390869,
        -0.1911020278930664,
        0.2154267430305481,
        0.023918718099594116,
        1.0398956537246704,
        0.4897977113723755,
        -0.7878768444061279,
        -0.15818831324577332,
        -0.45015713572502136,
        -0.012374266982078552,
        -0.39471423625946045,
        -0.6687219738960266,
        -0.25164222717285156,
        0.4837954640388489,
        0.026018913835287094,
        0.5215799808502197,
        0.07100395113229752,
        0.5425996780395508,
        -0.4561609625816345,
        -0.057091787457466125,
        -0.5069608092308044,
        0.00978580117225647,
        0.33240965008735657,
        -0.999281108379364,
        -0.506740927696228,
        0.02620057575404644,
        -0.2756071090698242,
        -0.15287154912948608,
        1.321890950202942,
        0.05846748128533363,
        -0.14642630517482758,
        -0.37179937958717346,
        0.7460842132568359,
        -0.30232328176498413,
        0.17614515125751495,
        -0.1423484832048416,
        0.7459337115287781,
        -0.5211323499679565,
        0.8068327903747559,
        0.6923394799232483,
        -0.6933399438858032,
        -0.5388052463531494,
        -0.5301374197006226,
        0.1516532003879547,
        0.5163778066635132,
        -0.4245668351650238,
        0.2238055318593979,
        -0.23594412207603455,
        -0.742277204990387,
        0.40072736144065857,
        0.4517756402492523,
        -0.45398157835006714,
        -0.2830181121826172,
        -0.3321269750595093,
        0.5272310972213745,
        -0.9827882647514343,
        0.5557529926300049,
        -0.5158177614212036,
        0.17377811670303345,
        -0.0007302165031433105,
        0.6812423467636108,
        -0.7214475274085999,
        -0.4199472665786743,
        0.2892915606498718
    ]
}