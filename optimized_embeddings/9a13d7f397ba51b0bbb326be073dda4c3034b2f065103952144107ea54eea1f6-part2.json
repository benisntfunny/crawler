{
    "id": "9a13d7f397ba51b0bbb326be073dda4c3034b2f065103952144107ea54eea1f6-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.ls_restrict_shift_update_apex_trigger.htm&language=en_US&type=5",
    "content": "nullManage Appointments with Salesforce Scheduler\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n Manage Appointments with Salesforce Scheduler\n Set Up Salesforce Scheduler and Book Appointments\n Get Started with Salesforce Scheduler\n Implementation Resources for Salesforce Scheduler\n Manage Business Information in Salesforce Scheduler\n Manage Availability and Exceptions in Salesforce Scheduler\n Set Up Operating Hours in Salesforce Scheduler\n Manage Shifts in Salesforce Scheduler\n Considerations for Shifts\n Manage Your Shifts in Schedule View\n Create Shifts in Salesforce Scheduler\n Configure Shift Settings\n Create Shifts in Bulk by Using a CSV File\n Engagement Channel Types\n Multiple Topics for Shifts\n Set Up Roles and Hierarchies for Shifts\n Create Record Types for Shift Statuses\n Determine Appointment Time Slots with Shifts\n Set Up Approval Process for Shifts\n Restrict Service Resources from Modifying Shifts for Two Weeks with...\n Restrict Working Hours Selectively\n Appointment Distribution\n Enable and Configure Concurrent Scheduling\n Enable and Configure Multi-Resource Scheduling\n Service Resource Absences in Salesforce Scheduler\n Set Up Holidays in Salesforce Scheduler\n Check Calendars to Determine Availability of Service Resources\n Determine Service Resource Availability by Work Type Groups\n Define Rules for Finding Appropriate Service Resources in Salesforce...\n How Salesforce Scheduler Determines Available Time Slots\n Customize Appointment Booking in Salesforce Scheduler\n Configure Appointment Email Notifications with the ICS File\n Enable Users to Create and Manage Appointments in Salesforce Scheduler\n Show Appointments as Events on Salesforce or External Calendars\n Troubleshoot Issues with Appointment Scheduling\n Extend Salesforce Scheduler Functionality with Salesforce Products...\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nSALESFORCE SCHEDULER\nRestrict Service Resources from Modifying Shifts for Two Weeks with an Apex Trigger\n\nService territory managers work with their service resources to plan shifts in advance. For example, you want to make an appointment booking available for two weeks starting from the current day. As a result, you want to prevent service resources from modifying their shifts during that period. To restrict a service resource from making any updates to shifts for two weeks, create an Apex trigger.\n\n//Because the next two weeks of time slots are visible to customers and are bookable,\n//we want to prevent any updates to those shifts.\n//This trigger doesn't allow to create a shift\n//where either start time or end time falls under\n// 1. Older than today's date\n// 2. Two weeks after today's date\n \ntrigger TwoWeeksLimitTrigger on Shift (before insert,before update) {\n    if(trigger.isInsert || trigger.isUpdate){\n        if (Trigger.isBefore) {\n            for(Shift shift : Trigger.New) {\n                Date todayDate = date.today();\n                Date twoWeekDate = todayDate.addDays(14);\n                if(shift.StartTime < todayDate || shift.StartTime > twoWeekDate){\n                    trigger.new[0].StartTime.addError('Customers are already booking slots for this time period and so changing Shifts is not allowed.');\n                }\n                else if(shift.EndTime < todayDate || shift.EndTime > twoWeekDate){\n                    trigger.new[0].EndTime.addError('Customers are already booking slots for this time period and so changing Shifts is not allowed.');\n                }\n            }\n        }\n    }\n}\n\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\nÂ ",
    "title": "Restricting Shift Changes with Salesforce Scheduler",
    "keywords": [
        "shift management",
        "salesforce scheduler",
        "apex trigger",
        "service resource availability",
        "appointment scheduling",
        "resource allocation",
        "time slot restriction",
        "calendar management"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.ls_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_get_started_with_salesforce_scheduler.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_licenses_for_salesforce_scheduler.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_implementation_resources_for_salesforce_scheduler.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_st.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_virtual_territories.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_service_resources.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_asset_scheduling_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_share_appnt_with_srvc_resources.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_wtg_wt.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_manage_data_translations.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_manage_availability_and_exceptions.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_oh.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_manage_shifts.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_engagement_channels.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_prereqs_for_using_engagement_channels.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_multiple_topics_for_shifts.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_roles_and_hierarchies.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_create_record_types_for_shift_status.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_determine_time_slot_with_shifts.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_shift_approval_process.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_create_approval_process.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_appointment_distribution.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_enable_appointment_distribution.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_concurrent.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_multiresource.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_holiday.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_read_calendars_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_read_external_events_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_overview_operating_hours_for_STM_for_WTGs.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_scheduling_policies_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_how_are_time_slots_determined.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_customize_appointment_booking_experience.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_flow_screen_customizations.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_flow_screen_comp_attributes.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_auto_assgnmnt_anonymous_schdlng.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_manage_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_manage_time_zones.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_configure_email_notification_with_ics.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_assign_service_rsrc_as_email_recipients.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_enable_users_to_create_and_manage_appointments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_appointment_statuses_and_status_categories_in_salesforce_scheduler.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_video_appnts_with_chime.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_add_my_appointments_utility_item.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_configure_email_for_unauthenticated_users.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_distribute_outbound_flows.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_group_service_appointments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_work_with_appointments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_inbound_scheduling.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_inbound_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_guest_users.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_set_up_modifying_guest_appointments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_work_with_inbound_appointments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_manage_appointments_for_guest_users.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_share_srvc_resource_availability_using_invitation_url.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_send_appt_invt_url_using_actionable_list.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_lobby_management.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_lobby_management_for_scheduled_appointments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_lobby_management_for_drop_in_appointments.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_manage_waitlists.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_drop_in_participants.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_attend_drop_in_participants_using_my_appmnts_console.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_event_mgmt_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_enable_event_mgmt.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_multi_attendee_event.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_troubleshoot_appointment_scheduling_issues.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_troubleshoot_issues_with_setup_and_appointment_scheduling.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_troubleshoot_unavailable_time_slots.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_identify_validation_issues_with_records.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.ls_functional_checklist_to_troubleshoot_flow_screens.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US"
    ],
    "embedding": [
        -0.31362220644950867,
        -0.019655678421258926,
        -0.8042222261428833,
        0.02335169166326523,
        -0.6119499802589417,
        0.27523157000541687,
        0.9308019876480103,
        -0.8994997143745422,
        -0.5764887928962708,
        0.5051665306091309,
        -0.026281703263521194,
        -0.8076091408729553,
        -0.03898651897907257,
        -0.13307496905326843,
        -0.5122989416122437,
        -0.7977830171585083,
        -0.45310577750205994,
        0.3442259430885315,
        0.1284053772687912,
        0.2909962832927704,
        -1.2030705213546753,
        -0.4557199478149414,
        0.1947404444217682,
        -0.4502941370010376,
        -0.5948505401611328,
        -0.15507912635803223,
        0.14957685768604279,
        0.452996164560318,
        -0.7131118774414062,
        -0.8774474263191223,
        0.9519491791725159,
        0.5888616442680359,
        0.36259713768959045,
        0.27024203538894653,
        -0.40455999970436096,
        0.09908157587051392,
        0.510023832321167,
        1.0476438999176025,
        -0.14175984263420105,
        0.37943845987319946,
        0.022084297612309456,
        0.22212302684783936,
        0.6253535747528076,
        -0.5321745872497559,
        -0.24329502880573273,
        0.015137728303670883,
        0.5097418427467346,
        0.6028407216072083,
        -0.378011554479599,
        -1.0095266103744507,
        0.03957286477088928,
        -0.11236077547073364,
        0.3795778155326843,
        0.05571863800287247,
        0.013850286602973938,
        -0.23987852036952972,
        -0.06260188668966293,
        -1.7003507614135742,
        -0.35535627603530884,
        -0.7592657804489136,
        0.6573349237442017,
        -0.10784518718719482,
        0.08030648529529572,
        -0.20635931193828583,
        -0.21515432000160217,
        3.8931407928466797,
        0.31651803851127625,
        1.0848430395126343,
        0.18530239164829254,
        -0.4154198169708252,
        0.7240206003189087,
        -0.088189497590065,
        0.10575847327709198,
        0.7126032710075378,
        -0.7080258727073669,
        0.19522058963775635,
        -0.9115405678749084,
        -0.43233177065849304,
        0.6108570098876953,
        -0.24641266465187073,
        0.5331554412841797,
        -0.71317458152771,
        0.48373523354530334,
        0.691305935382843,
        -0.2735380530357361,
        -0.7647761702537537,
        0.2403963804244995,
        0.8927797079086304,
        0.7033580541610718,
        -0.2979884743690491,
        0.7368793487548828,
        0.33769357204437256,
        0.0701155960559845,
        -0.963752031326294,
        -0.14690594375133514,
        0.16952887177467346,
        -0.3103073835372925,
        0.3050403892993927,
        0.7939316630363464,
        0.025279343128204346,
        1.4240063428878784,
        0.11111190915107727,
        0.29911670088768005,
        -0.21483615040779114,
        -0.645616352558136,
        0.14385554194450378,
        0.6814732551574707,
        -0.2553104758262634,
        0.48124465346336365,
        0.18277058005332947,
        0.19195090234279633,
        0.8011679649353027,
        0.32670068740844727,
        0.48794347047805786,
        -0.2629967927932739,
        1.033515214920044,
        -0.2695281505584717,
        0.7240294218063354,
        -0.44881269335746765,
        -1.1268631219863892,
        0.3421418368816376,
        0.3639374077320099,
        -0.13150596618652344,
        -0.4749772250652313,
        0.08185642212629318,
        0.6886785626411438,
        0.1352633833885193,
        -0.348414808511734,
        -0.2932782471179962,
        -0.2963501214981079,
        0.2689807116985321,
        0.34191152453422546,
        0.4512200951576233,
        -1.3574645519256592,
        0.07234513014554977,
        0.45166799426078796,
        -0.21296826004981995,
        -0.5428755283355713,
        0.09378969669342041,
        -0.15220817923545837,
        0.11102931201457977,
        -0.5958515405654907,
        0.2510055601596832,
        0.7115691900253296,
        -0.8027830123901367,
        0.809490978717804,
        0.8043020367622375,
        0.04712315648794174,
        -0.7104243040084839,
        0.16616663336753845,
        0.39505621790885925,
        -0.30125153064727783,
        0.441184937953949,
        -0.46296727657318115,
        -0.14689140021800995,
        -0.08492346107959747,
        0.7928767800331116,
        0.11117817461490631,
        -0.9902613759040833,
        -0.08928874135017395
    ]
}