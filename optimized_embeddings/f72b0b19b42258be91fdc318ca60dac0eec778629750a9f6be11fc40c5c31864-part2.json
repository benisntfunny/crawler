{
    "id": "f72b0b19b42258be91fdc318ca60dac0eec778629750a9f6be11fc40c5c31864-part2",
    "url": "https://help.salesforce.com/s/articleView?id=ind.v_admin_guest_user_enhancements_overview_27751.htm&language=en_US&type=5",
    "content": "nullGeneral Administration and Developer Help for Salesforce Industries...\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n General Administration and Developer Help for Salesforce Industries...\n Bulk Async Engine For Cart APIs\n Developer Documentation\n System Administration and Set Up\n Assign Vlocity Licenses to Users Automatically\n Add Vlocity Package Licenses to a Group of Users\n Allocate Space in the Platform Cache Partitions\n Overview of Attributes\n Overview of Profiles and Security for Vlocity\n Select the User Interface for Profiles\n View Profiles\n Grant Access to Vlocity Record Types\n Display Vlocity End-User Tabs by Default\n Grant Custom Object Permissions\n Custom Object Permissions\n Grant Access to Vlocity Reports and Dashboards\n Enable Apex Class and Visualforce Page Access\n Adjust Sharing Settings\n Guest User Enhancements Overview\n Guest User Technical Details\n Guest User Enhancements with Vlocity Products\n Vlocity Encryption Solution\n When to Use Salesforce Person Accounts with Vlocity Products\n Add your Salesforce Instance to the Remote Site Settings List\n Configure a Sandbox after a Refresh\n Enable the Enhanced Lookups Search Setting\n How to Resolve Known Installation and Upgrade Issues\n Vlocity Triggers\n Relationships Between Objects\n Campaign Call List\n Overview of State Models, Transitions, Rules, and Actions\n Industries Data Models for Communications, Media, Energy,...\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nADMINISTRATION AND DEVELOPER HELP\nGuest User Enhancements Overview\n\nImprove data security for orgs that leverage guest users in Communities or Sites.\n\nFor Vlocity security improvements, read Guest User Technical Details.\n\nWho Is Affected\n\nIf you have Salesforce Communities or Salesforce Sites, check whether you have enabled Public Access (Guest User). If yes, you are affected by these changes and need to understand the details.\n\nWhat’s the Problem\n\nThe guest user was intended to access public information in a customer’s site and maybe generate some public data, such as public message posts, chat, Q&A, public information search, knowledgebase, etc.\n\nBut as customer implementations and Vlocity started using the guest user for anonymous journeys that require capturing user information in Salesforce ( such as e-commerce, quotes, sales, etc.), security required additional custom capabilities. These capabilities included API gateways and the complex management of org-wide defaults that affected both authenticated external users and the guest user.\n\nIMPORTANT\n\nUnderstanding the security problems is essential to ensure you implement a secure solution when using the guest user.\n\nThe guest user profile has two security gaps:\n\nThe same user — From a Salesforce point of view, all guest users are the same user.\n\nSequential ID — Salesforce IDs are sequential and can be guessed.\n\nAs a result, a hacker can access other guest user records if the implemented API is not designed securely. If you implement an API (Apex REST or remote access) that a guest user can call and you rely only on CRUD and sharing rules for security, you won’t be able to secure this data. So, a guest user will have access to all guest user data as they are the same user from a Salesforce point of view.\n\nWhat Salesforce is Doing\n\nSalesforce is closing the two security gaps of the same user profile and sequential IDs.\n\nSame User— Salesforce is enforcing the \"least privilege\" principle.\n\nThe guest user profile has a separate organization-wide default (OWD) from external users, and it will be always private.\n\nGuest users can’t own any record and can’t access any record by default.\n\nGuest users can create records but can’t read, update, or delete records by default.\n\nSequential ID — Salesforce recommends the \"reduce attack surface\" principle.\n\nUse a single entry point for record access (setter/getter).\n\nSalesforce recommends (but does not enforce) that developers encrypt and decrypt the IDs.\n\nThis is where customer’s implementation requires attention and should follow the recommended best practices because encryption and decryption are the responsibility of the customer's implementation.\n\nSeveral Vlocity APIs have been updated in Spring '20 Minor Release to follow these best practices. But, since they are used with custom APIs, Vlocity also exposes a UserSecurity classUserSecurity Class to help you manage the encryption and decryption.\n\nAnother option is to add a custom field in the objects that are required for the guest user and to generate a secure non-sequential ID. (For example, use the Crypto.GenerateAESKey and encode as hex or URL safe.) Then, only use this new secure ID instead of the encrypted record ID. This would be more performant, scalable, and easier to manage and code than the using encryption/decryption in all API because the hit is only when creating a new record. But the Vlocity APIs (such as the Cart-based or Digital Commerce APIs) still require the encrypted ID to work as Vlocity follows the Salesforce recommended solution.\n\nAfter the updates, Salesforce still can’t differentiate guest users. As a result, any privilege given to a guest user applies to all guest users. The ID encryption prevents a guest user from accessing other guest user's records. Sharing rules do not prevent access but, in fact, grant access.\n\n\"Any record modification needs for Guest Users should be addressed by executing such updates in Apex methods that reside in classes running in ‘without sharing’ mode, coupled with encryption/decryption of resources. This approach has been deemed most secure by Salesforce.\" Salesforce source\n\nGuest User Technical Details\nTo implement guest user support, review the security considerations and requirements for rule sharing and using the system mode.\nGuest User Enhancements with Vlocity Products\nThe guest user is part of several use cases in Vlocity, from anonymous e-commerce to insurance quotes. Vlocity products have been enhanced to follow Salesforce guidance.\nVlocity Encryption Solution\nVlocity provides an encryption solution that follows Salesforce recommendations and that customers can leverage in their custom implementation. You don’t need to understand encryption, encoding, key management, and other technical aspects because Vlocity abstracted all that for you.\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Improving Salesforce Guest User Security",
    "keywords": [
        "salesforce guest user security",
        "guest user enhancements",
        "vlocity encryption solution",
        "record access management",
        "apex class and visualforce page access",
        "custom object permissions"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_Administration_and_Develop_Help.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_async_engine_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_async_engine_apis.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_async_engine_develop_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_async_engine_custom_processes.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_async_engine_process_tracking_debug.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_developer_documentation_651797.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_interfacesimplementationsand_services_651813.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_working_with_interfaces_651849.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_availability_and_eligibility_interface_implementations_652003.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_interfaces_reference_652256.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_working_with_implementations_658020.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_implementations_reference_658161.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_working_with_services_662921.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_vlocity_omnichannel_web_apis_663585.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_omnichannel_web_apis_663626.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_vlocity_platform_apis_663903.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_attribute_objects_apis_664135.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_campaign_apis_664528.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_customer_stories_and_story_quick_actions_apis_665508.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_dev_t_vlocity_dataraptor_apis_666121.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_system_administration_and_set_up_25005.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_assign_vlocity_licenses_to_users_automatically_25013.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_overview_of_attributes_25315.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_product_attributes_in_epc.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_upgrading_the_attribute_schema_25922.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_profile_attributes_26254.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_overview_of_profiles_and_security_for_vlocity_26839.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_guest_user_enhancements_overview_27751.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_guest_user_enhancements_with_vlocity_products_27917.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_vlocity_encryption_solution_28346.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_when_to_use_salesforce_person_accounts_with_vlocity_28493.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_vlocity_triggers_28627.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_relationships_between_objects_29470.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_any_object_relationship_graphs_29494.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_workflow_for_creating_a_relationship_graph_29605.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_define_relationships_using_the_party_model_29649.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_workflow_for_creating_a_relationship_graph_template_30232.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_workflow_for_editing_a_relationship_graph_31095.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_use_the_relationship_graph_admin_config_tool_31150.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_use_the_vlocity_graph_component_editor_31676.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_party_bound_relationship_graphs_32055.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_create_a_new_party_relationship_type_32427.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_households_32715.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_premises_32879.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_campaign_call_list_33072.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_workflow_for_installing_and_configuring_the_campaign_record_pagecomponents_33094.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_campaign_call_list_record_page_features_33281.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_campaign_actions_33347.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_member_actions_33519.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_t_eventnoteand_task_actions_33639.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_overview_of_state_modelstransitionsrulesand_actions_179897.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_workflow_for_preparing_the_base_object_for_a_state_model_179958.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_workflow_for_creating_a_state_modelstatesand_transitions_180716.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_workflow_for_creating_state_transition_rules_181039.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_workflow_for_creating_actions_for_states_and_rules_181325.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_workflow_for_testing_a_state_model_181837.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_workflow_for_using_a_trigger_and_an_on_creation_action_182167.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.os_workflow_for_setting_up_caching_for_state_models_182577.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_data_models_vlocity_data_model_666727.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_data_models_t_vlocity_communications_data_model_666929.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_data_models_tsalesforce_industries_communicationsmediaand_energyparty_model_666985.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.networks_resources.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.sites_overview.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.networks_public_access.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=ind.v_admin_guest_user_technical_details_27809.htm&language=en_US&type=5"
    ],
    "embedding": [
        0.5612983107566833,
        0.183150053024292,
        -0.34400320053100586,
        -0.6588378548622131,
        -0.140839621424675,
        0.05299858748912811,
        -0.20425930619239807,
        0.2148657590150833,
        0.4688865840435028,
        0.030451005324721336,
        -0.037214040756225586,
        0.01667223684489727,
        0.2059091031551361,
        -0.5367869734764099,
        0.28911566734313965,
        -0.09551021456718445,
        0.7143068909645081,
        -0.14617663621902466,
        0.32133427262306213,
        0.8048830628395081,
        -0.3380456268787384,
        -0.193135604262352,
        -0.35454046726226807,
        0.9705966711044312,
        0.5168529748916626,
        0.33671465516090393,
        -0.49020305275917053,
        0.5639790296554565,
        -0.2508891820907593,
        -0.31790077686309814,
        -0.05793782323598862,
        0.12773728370666504,
        0.6940351724624634,
        -0.4929824471473694,
        -0.26672783493995667,
        -0.2434375137090683,
        0.23904024064540863,
        -0.867631733417511,
        0.049191974103450775,
        -0.06344298273324966,
        -0.31605708599090576,
        0.34530121088027954,
        -0.31335005164146423,
        -0.14786724746227264,
        -1.0349632501602173,
        -0.054793164134025574,
        0.657242476940155,
        -0.16434326767921448,
        -0.5078972578048706,
        0.11524069309234619,
        0.40303856134414673,
        -0.1538798213005066,
        0.16423077881336212,
        -0.4578079581260681,
        0.29535382986068726,
        0.24305932223796844,
        0.6797793507575989,
        -0.7298955917358398,
        -0.050819363445043564,
        -0.08684565126895905,
        -0.5886132717132568,
        -0.3322050869464874,
        -0.3175536096096039,
        -0.15010492503643036,
        -0.5761895775794983,
        0.16926085948944092,
        -0.005229495465755463,
        0.41825640201568604,
        0.22429496049880981,
        1.0161354541778564,
        0.07625667750835419,
        -0.09727029502391815,
        0.3428294360637665,
        -0.37338194251060486,
        0.5530011653900146,
        0.5636060237884521,
        -0.7994663715362549,
        0.510138750076294,
        -0.7777576446533203,
        -0.08355088531970978,
        -0.43597251176834106,
        -0.05906147509813309,
        -0.8256968259811401,
        0.105460025370121,
        0.5136831998825073,
        -0.3702971041202545,
        -0.21216294169425964,
        -0.5456874370574951,
        -0.3175726532936096,
        -0.47783321142196655,
        -0.023837881162762642,
        -0.46671056747436523,
        0.44318854808807373,
        -0.3918336033821106,
        0.9758358001708984,
        0.1468958556652069,
        0.08127614855766296,
        -0.3379071354866028,
        0.585513710975647,
        0.11935156583786011,
        -0.42459332942962646,
        0.8706181049346924,
        -0.5754532814025879,
        0.5562973022460938,
        0.06965865194797516,
        0.2036817967891693,
        0.06460501253604889,
        -0.39690685272216797,
        -0.4246053695678711,
        -0.4057798385620117,
        0.014946043491363525,
        -0.895751416683197,
        -0.6739640235900879,
        -0.0014094263315200806,
        0.36668696999549866,
        0.07062709331512451,
        -0.3493836224079132,
        0.16395996510982513,
        -0.4923912286758423,
        -0.7816001176834106,
        0.2686968743801117,
        -0.6950114369392395,
        -0.6036319732666016,
        0.053891707211732864,
        -0.041798193007707596,
        0.13922226428985596,
        -0.2836996912956238,
        4.507951259613037,
        0.5609177350997925,
        0.08619991689920425,
        0.3013094663619995,
        0.22785210609436035,
        1.0815305709838867,
        -0.07044641673564911,
        0.17279241979122162,
        0.25342094898223877,
        -0.4202122092247009,
        0.32193389534950256,
        0.08871932327747345,
        0.30273377895355225,
        0.13390766084194183,
        -0.5667955875396729,
        -0.32864636182785034,
        0.058315739035606384,
        0.2508212924003601,
        0.15448985993862152,
        -0.5462650060653687,
        -0.8728686571121216,
        -0.24046693742275238,
        -0.0956965982913971,
        0.4856308698654175,
        -0.006611935794353485,
        -0.0008706562221050262,
        0.4723636209964752,
        -0.07035495340824127,
        -0.3099065124988556,
        -0.25138166546821594,
        0.31730371713638306,
        -0.6756261587142944,
        0.511980414390564,
        -0.54737389087677,
        -0.4912159740924835,
        0.7340825796127319,
        0.07863509654998779,
        0.07710947841405869,
        -0.5749096870422363,
        0.00890926644206047,
        0.2154410183429718,
        0.3391842842102051,
        -0.3543422222137451,
        -0.02285635471343994,
        0.1540972739458084,
        0.6088271737098694,
        0.1411508321762085,
        -0.2836449146270752,
        0.7947044968605042,
        0.15900658071041107,
        0.3377879858016968,
        -0.2944015562534332,
        0.19882357120513916,
        0.03938540816307068,
        -0.03605165332555771,
        -0.01570771262049675,
        0.19574058055877686,
        -0.10223089903593063,
        0.1608884483575821,
        0.4026245176792145,
        0.4495720863342285,
        0.0013526231050491333,
        -0.21935442090034485,
        0.150412455201149,
        0.19756536185741425,
        0.3645443916320801,
        0.3509095311164856,
        0.36324357986450195,
        -0.7335783243179321,
        0.01273098960518837,
        0.35651764273643494,
        -0.3827647566795349,
        -0.7131040096282959,
        -0.8351494073867798,
        -0.2529147267341614,
        -0.4408347010612488,
        -0.36251601576805115,
        0.1808902770280838,
        0.1253015398979187,
        0.14125168323516846,
        0.009545840322971344,
        0.7374833226203918,
        -0.23177829384803772,
        0.053671687841415405,
        0.7551308274269104,
        -0.3217557966709137,
        -0.8659451007843018,
        -0.18907411396503448,
        0.28881123661994934,
        -0.27175360918045044,
        -0.08805066347122192,
        0.11199472844600677,
        -0.023271963000297546,
        -0.4695415496826172,
        0.2958383858203888
    ]
}