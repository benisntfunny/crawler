{
    "id": "84b05e0b0380ce04385b7838d71f445557e767020e366d8257b2a0f9d25b5e63-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_shopping_cart_price.htm&language=en_US&type=5",
    "content": "nullSalesforce B2B Commerce for Visualforce\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n Salesforce B2B Commerce for Visualforce\n Get Started with B2B Commerce for Visualforce\n Manage Storefront Details and Metadata\n Set Up Product Data for B2B Commerce for Visualforce\n Help Buyers Discover Products on Your Storefront\n Price and Sell Products for B2B Commerce for Visualforce\n Support Buyer Accounts for B2B Commerce for Visualforce\n Provide a Smooth Path to Purchase for Storefront Buyers\n Customize the Storefront User Experience\n Considerations for Storefront User Experience Customizations\n Configure the Default Storefront Pages\n Home Page\n Checkout Page\n My Account Page\n Product Compare Page\n Product Detail Page\n Product List Page\n Scaled Cart Page\n Shopping Cart Page\n Configure Product Info and Options on the Shopping Cart Page\n Show Coupon Information on the Shopping Cart Page\n Allow a Buyer to Email the Contents of the Shopping Cart Page\n Allow a Buyer to Request a Quote for the Contents of the Shopping Cart\n Allow a Buyer to Change a Product's Quantity to Zero on the Shopping...\n Show Related Products on the Shopping Cart Page\n Optimize How Frequently the Shopping Cart Page Calls Price Logic\n Extension Points for the Shopping Cart Page\n Site Login Page\n Site Register Page\n Modify the Column Layout of a Storefront Page\n Add Widgets to Storefront Pages with Visualforce Components\n Customize Storefront Headings and Text with Page Labels\n Provide Intuitive Storefront Navigation with Menus\n Author Custom Content for a Storefront Page\n Style Your Storefront with a Theme\n Extend the Default Storefront Pages\n Source Options for Storefront Media\n Allow Only One Country, Territory, or State in Address Picklists\n Strategize for Storefront Success\n Deliver Storefront Performance and Security\n Market Templates for B2B Commerce for Visualforce\n Solution Resources for B2B Commerce for Visualforce\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nVISUALFORCE B2B COMMERCE\nOptimize How Frequently the Shopping Cart Page Calls Price Logic\n\nProvide a smooth buyer experience on the Shopping Cart page and gain more precise control over your org's resources. Specify the condition that triggers the Shopping Cart page to call pricing logic in the B2B Commerce for Visualforce API for updating cart item prices. Implement a reprice strategy that satisfies your solution's requirements but avoids unnecessary, expensive calls to the pricing logic.\n\nREQUIRED EDITIONS AND USER PERMISSIONS\n\nSalesforce Compatibility\n\nSalesforce Classic (not available in all orgs) and Lightning Experience for Enterprise, Performance, Unlimited, and Developer editions.\n\n\n\n\nB2B Commerce Compatibility\n\nB2B Commerce for Visualforce Winter ’21 (version 4.13)\nB2B Commerce for Visualforce Spring ’20 (version 4.12)\nB2B Commerce for Visualforce Summer ’19 (version 4.11)\nB2B Commerce for Visualforce Spring ’19 (version 4.10)\n\n\nUSER PERMISSIONS NEEDED\nTo access CC Admin and change settings:\tAccess B2B Commerce for Visualforce Admin Settings permission set\nTo execute anonymous Apex:\tAuthor Apex\n\nA reprice strategy evaluates the following values:\n\nRepriced Date\nField on the CC Cart custom object that specifies the date and time when B2B Commerce for Visualforce most recently priced the cart's items. The initial value is set when a buyer first creates the cart record. B2B Commerce for Visualforce updates this value each time it calls pricing logic on the cart's items.\nValid Prices Date\nStorefront setting that specifies the date and time when pricing for your storefront's products is considered complete. This value isn't set automatically. An admin must manually or programmatically set this value, and maintain it as pricing information changes.\n\nSelect one of the following reprice strategies:\n\nDaily\nReprice the cart only when the cart's Repriced Date is earlier than the current day. The time zone setting on the buyer's user record determines the current day. For example, if the cart's Repriced Date is 2019-02-21 and the current day is also 2019-02-21, the cart isn't repriced. But, if the current day is 2019-02-22, the cart is repriced. This strategy ignores the storefront's Valid Prices Date.\nExpired\nReprice the cart only when the cart's Repriced Date is earlier than the storefront's Valid Prices Date. This scenario implies that the cart hasn't been priced since product pricing was finalized. For example, if the cart's Repriced Date is 2019-02-20 10:00:00 and the storefront's Valid Prices Date is 2019-02-20 10:30:00, this condition is satisfied. This option is a good choice if you're concerned with product Start Date and End Date ranges as they pertain to pricing.\nDaily or Expired (Default)\nReprice the cart when either the daily or expired condition is satisfied.\nAlways\nReprice the cart every time the Shopping Cart page loads, regardless of the cart's Repriced Date or the storefront's Valid Prices Date.\nNOTE These strategies apply only when loading content on the Shopping Cart page. By default, a reprice always occurs when the cart items or price adjustments change, such as:\nWhen loading a cart that already has a coupon applied\nWhen applying a new coupon to the cart\nWhen removing a coupon from the cart\nWhen removing an item from the cart\nWhen modifying the quantity of an item in the cart\nTIP The ccrz.ccLogicCartPrice.validateLastPriceDate() logic service provider method defines the logic for the reprice strategy. To customize the default logic, create subscriber code that overrides the default method.\nIMPORTANT When you enable Cart Scale in B2B Commerce for Visualforce Winter ’21 (version 4.13), the Scaled Cart page replaces the Shopping Cart page version 2.0 but still evaluates these strategies. The configurations described in this topic still apply to the Scaled Cart page. However, a cart reprice strategy of Always isn't compatible with Cart Scale. If you enable Cart Scale, ensure that your cart's reprice strategy is Daily, Expired, or Daily or Expired.\n\nTo select a cart reprice strategy, first set the Valid Prices Date storefront setting, and then update your storefront configuration settings.\n\nSet the Valid Prices Date storefront setting.\nOn the CC Admin tab in your org, select your storefront (1).\nIn the Storefront Settings menu, select General (2).\nFind the Valid Prices Date setting (3). Click inside the field and select a date. Or, to easily insert the current date and time, click the timestamp (4).\nTIP To set this value programmatically, execute the following anonymous Apex code from the Developer Console:\nccrz.cc_util_Reflection.updateStoreFrontSettings('DefaultStore', 'ValidPricesDate__c', Datetime.now());\nUpdate your storefront configuration settings.\nIn the Storefront Settings menu, select Configuration Settings (5).\nFrom the Module picklist, select Cart (6).\nFind the Optimize Cart Repricing configuration (7), find its value (8).\nTIP\nTo change the current value, click Override in the Action column. Enter one of the following supported values, and click Create.\nIf the configuration doesn't exist, click New , enter the following values in the New Page Setting window, and click Create.\nFIELD\tVALUE\nModule\tCart\nConfiguration\tOptimize Cart Repricing\nPage\tall\nValue\t\ndaily\nexpired\ndailyorexpired\nalways\nBuild and activate a new configuration cache.\nSEE ALSO\nScale Your Cart Capabilities for a Large Number of Items\n(Salesforce Developers) ccrz.ccLogicCartPrice.validateLastPriceDate\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Optimizing Shopping Cart Performance",
    "keywords": [
        "Shopping Cart Optimization",
        "Reprice Strategies",
        "Storefront Settings",
        "Cart Scale",
        "B2B Commerce for Visualforce"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_visualforce.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_start.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_install.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup_community_users.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup_self_register.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup_sharing_rules.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_admin.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_admin_global.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_storefront_data.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_settings_loader.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_admin_storefront.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_configuration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_configuration_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_types.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_dynamic_kit.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_image.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_discovery.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_category.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_category_media.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_spec.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_index.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_sell.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_price_list.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_promotion.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_coupon.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_buyer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_account_group.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_effective_account.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_purchase.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_cart_scale.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_storefront_ux.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_pages.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_home.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_checkout.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_my_account.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_product_compare.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_product_detail.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_product_list.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_scaled_cart.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_shopping_cart.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_site_login.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_site_register.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components_effective_account_selector.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components_feature_filtering.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components_spotlight_featured_products.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_labels.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_menu.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_theme.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_extension.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_storefront.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_localize.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_seo.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_seo_friendly_urls.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_seo_bot_pages.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_lwc.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_trust.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_shield.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.overview_edition_lex_only.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_configuration_cache.htm&language=en_US&type=5"
    ],
    "embedding": [
        0.13727322220802307,
        -0.3955127000808716,
        -0.3536076247692108,
        0.41462963819503784,
        -0.2836267352104187,
        0.1496964544057846,
        0.026960231363773346,
        -0.1322103589773178,
        -0.11005505919456482,
        0.25728675723075867,
        0.4255783259868622,
        0.5709167718887329,
        0.6904371976852417,
        0.9905480146408081,
        0.9335971474647522,
        0.09699326753616333,
        0.06303876638412476,
        -0.09079457819461823,
        -0.40083634853363037,
        0.14947228133678436,
        -0.6601625680923462,
        0.11505194008350372,
        0.39456117153167725,
        -0.41235098242759705,
        -0.5938856601715088,
        -0.06878271698951721,
        -0.48040518164634705,
        0.11297376453876495,
        -0.5182864665985107,
        -0.2184939980506897,
        -0.3191596567630768,
        -0.7246906161308289,
        0.24476589262485504,
        -0.28303608298301697,
        -0.29291418194770813,
        0.5620814561843872,
        0.06237603724002838,
        0.4608619213104248,
        0.016221052035689354,
        0.6105402708053589,
        -0.3732110261917114,
        0.2997908592224121,
        0.1064344123005867,
        -0.15812616050243378,
        -0.08316843956708908,
        0.08543165028095245,
        -0.7456098794937134,
        -0.2745540738105774,
        0.46111875772476196,
        -0.0017100721597671509,
        -0.531457781791687,
        0.07765869796276093,
        -1.001105546951294,
        0.5292313694953918,
        0.2488655149936676,
        -0.1880740523338318,
        -0.4490865468978882,
        -0.2755851745605469,
        0.19899635016918182,
        -0.6549147367477417,
        -0.20049062371253967,
        0.614819347858429,
        -0.26510244607925415,
        -1.0796746015548706,
        -0.8932437300682068,
        -0.23685243725776672,
        0.42195582389831543,
        0.7730813026428223,
        -0.43848860263824463,
        -0.5830119252204895,
        0.3852252960205078,
        -0.6422625184059143,
        -0.7084941864013672,
        0.14536438882350922,
        -0.14001722633838654,
        0.28749358654022217,
        -0.7192525267601013,
        -0.25786885619163513,
        0.5098584890365601,
        0.05602552741765976,
        0.06829530000686646,
        0.8786371350288391,
        0.3621748685836792,
        -0.3943835198879242,
        0.23416423797607422,
        0.6801272630691528,
        0.7141741514205933,
        -0.38004034757614136,
        0.768245279788971,
        0.4470672309398651,
        0.21995213627815247,
        0.3322075605392456,
        -0.24114707112312317,
        -0.584368109703064,
        0.22240841388702393,
        -0.05735427886247635,
        -0.4676613211631775,
        -0.08650127053260803,
        -0.5166327953338623,
        -0.5186595916748047,
        0.7859927415847778,
        -0.5273535847663879,
        -0.41330212354660034,
        -0.40220293402671814,
        0.0066541023552417755,
        -0.5763371586799622,
        0.24260759353637695,
        -0.6086206436157227,
        -0.17317897081375122,
        0.19612863659858704,
        0.08350494503974915,
        0.3573114573955536,
        -0.4332317113876343,
        4.010437965393066,
        0.1711675226688385,
        0.9754209518432617,
        0.34909042716026306,
        0.9652785658836365,
        0.8706451654434204,
        -0.2991087734699249,
        -0.2093576192855835,
        0.5171173214912415,
        -0.4392942488193512,
        -0.45825496315956116,
        -0.1138540506362915,
        0.22850185632705688,
        0.9559698700904846,
        -0.7408788800239563,
        0.045232053846120834,
        -0.9772842526435852,
        0.3135548532009125,
        1.0169272422790527,
        -0.07311176508665085,
        -1.3070173263549805,
        0.21300779283046722,
        -0.28957998752593994,
        1.163158893585205,
        -0.1338004469871521,
        0.11092141270637512,
        -0.3692997395992279,
        -0.6499032974243164,
        -0.26763325929641724,
        -0.48936861753463745,
        0.9695180654525757,
        -0.3539540767669678,
        0.7195224165916443,
        -0.3864545524120331,
        -0.1501103937625885,
        0.6930834054946899,
        0.006139164790511131,
        0.2513355314731598,
        0.065677709877491,
        -0.7755453586578369,
        0.8793737888336182,
        0.12656185030937195,
        -0.9089532494544983,
        0.29197555780410767,
        0.20918776094913483,
        -0.2112172394990921,
        0.2347739338874817,
        0.43023911118507385,
        0.2569122612476349,
        0.05370170623064041,
        0.8716182708740234,
        -0.4146353006362915,
        0.287442147731781,
        0.5874214172363281,
        -0.40906959772109985,
        0.36315086483955383,
        -0.25459611415863037,
        -0.5418776869773865,
        0.4395618438720703,
        0.24171045422554016,
        0.14602746069431305,
        0.044427696615457535,
        -0.5053346753120422,
        0.21242552995681763,
        -0.3355424404144287,
        -0.10699521005153656,
        0.3705849051475525,
        0.6914138197898865,
        0.12495417892932892,
        -0.5441785454750061,
        0.31527090072631836,
        -0.40466731786727905,
        -0.7617703080177307,
        0.16828462481498718,
        -0.3543252944946289,
        -0.032102253288030624,
        -0.36179590225219727,
        0.8415318727493286,
        0.306057870388031,
        -0.9899277687072754,
        0.22695571184158325,
        0.08749479055404663,
        -0.052701063454151154,
        0.10667595267295837,
        0.6009582877159119,
        0.2509777545928955,
        -1.2342510223388672,
        0.31665611267089844,
        0.1065998375415802,
        0.2766319811344147,
        -0.4086085855960846,
        0.6849290728569031,
        -0.11476787179708481,
        -0.5638294816017151,
        -0.1099393367767334
    ]
}