{
    "id": "d9b9e7c983d500bbbd533e666a650fa09422a72443daa7708e72cd5978058b56-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_summer_coupon.htm&language=en_US&type=5",
    "content": "nullB2B Commerce for Visualforce Release Notes and Upgrade Guide\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n B2B Commerce for Visualforce Release Notes and Upgrade Guide\n B2B Commerce for Visualforce Winter ’21 (Version 4.13) Release Notes\n B2B Commerce for Visualforce Spring ’20 (Version 4.12) Release Notes\n B2B Commerce for Visualforce Summer ’19 (Version 4.11) Release Notes\n Upgrade to B2B Commerce for Visualforce Summer ’19 (Version 4.11)\n Lightning Components for B2B Commerce for Visualforce: Create...\n Google Analytics: Easily Track Storefront Activity\n Reorder Widget: Give Buyers a Shortcut for Repeating a Previous Order\n SEO: Enhance Your Global Search Strategy\n Coupons: Easily Extend Default Coupon Behavior\n Order Review 2.0: Deliver a Faster Standard Checkout Experience\n Performance and Security: Improve Discovery and Elevate Trust\n Promotions: Provide Consistent Experiences Across Devices\n Address Picklists: Easily Specify a Single Country or State Value\n Other Fixes in B2B Commerce for Visualforce Summer ’19 (Version 4.11)\n Patch Notes for B2B Commerce for Visualforce Summer ’19 (Version 4.11)\n B2B Commerce for Visualforce Spring ’19 (Version 4.10) Release Notes\n B2B Commerce for Visualforce Summer ’18 (Version 4.9) Release Notes\n Upgrade B2B Commerce for Visualforce to a New Release or Patch\n Resolve Guest User Security Alerts to Keep Your Storefronts Secure...\n Maintain Established CloudCraze Solutions\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nVISUALFORCE B2B COMMERCE RELEASE NOTES AND UPGRADE GUIDE\nCoupons: Easily Extend Default Coupon Behavior\n\nGain precise control over how coupons are applied on your storefront, including which users can use coupons and when they can apply coupons. The B2B Commerce for Visualforce API includes new methods and logic classes that you can extend or override. With this change, you can more easily customize the logic that's evaluated before or after a coupon is applied.\n\nWhere: This change applies to B2B Commerce for Visualforce Summer ’19 (version 4.11) in Lightning Experience and Salesforce Classic in Enterprise, Performance, Unlimited, and Developer editions.\n\nWhy: The ccrz.ccApiCoupon class adds the following methods and extensible logic classes:\n\nccrz.ccApiCoupon.apply() method, which calls the ccrz.ccLogicCouponApply logic service provider class\nccrz.ccApiCoupon.remove() method, which calls the ccrz.ccLogicCouponRemove logic service provider class\n\nBy extending or overriding these logic classes, you can modify or replace the default logic for applying or removing coupons. Some examples of possible customization use cases include:\n\nRestrict which buyers can apply coupons, such as by account or contact.\nRestrict when buyers can apply coupons, such as within certain times of day.\nAdd your own validation rules before or after a coupon is applied.\nAutomatically apply a coupon when a buyer meets certain criteria.\nNOTE This change only provides new extension points for logic before or after a coupon is applied, or for replacing the logic of applying a coupon. This change doesn't add new coupon functionality, and doesn't support extending the default logic that occurs during the application of a coupon.\n\nHow: After you upgrade the managed package, version 10 of the B2B Commerce for Visualforce API includes the new methods and logic classes by default. These additions don't affect any existing coupon functionality. To start extending or overriding these logic classes, write your own subscriber code.\n\nNOTE The new methods and logic classes aren't compatible with the following customizations:\nExisting overrides of the ccrz.ccLogicCartPrice or ccrz.ccLogicCartAddTo class\nCustomizations that don't call the default implementation of the ccrz.ccLogicCartPrice.performDML(), ccrz.ccLogicCartPrice.applyCoupons(), or ccrz.ccLogicCartAddTo.addCouponCode() method\nSEE ALSO\nOffer Coupons for Discounts on Storefront Purchases\n(Salesforce Developers) ccrz.ccApiCoupon\n(Salesforce Developers) ccrz.ccLogicCouponApply\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Extending Coupon Behavior in B2B Commerce for Visualforce",
    "keywords": [
        "coupons",
        "coupon behavior",
        "Visualforce upgrade guide",
        "managed package",
        "extension points",
        "logic service provider class",
        "validation rules",
        "automated coupon application"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_release_notes.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2021_winter.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2021_winter_cart.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2021_winter_checkout.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2021_winter_lwc.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2021_winter_trust.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2021_winter_admin.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2021_winter_developer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2020_spring.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2020_spring_plp.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2020_spring_admin.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2020_spring_trust.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2020_spring_patches.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_summer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_summer_seo.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_summer_trust.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_spring.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_spring_upgrade.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_spring_seo.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_spring_cart.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_spring_storefront.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_spring_performance.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2019_spring_admin.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2018_summer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2018_summer_plp.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2018_summer_developer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_rn_2018_summer_patches.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_upgrade.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_upgrade_prepare.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_guest_security.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.cloudcraze_patches.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_coupon.htm&language=en_US&type=5"
    ],
    "embedding": [
        -0.12000751495361328,
        -0.8063692450523376,
        0.2702610492706299,
        -1.22545325756073,
        0.6373448967933655,
        0.11476448178291321,
        0.663597822189331,
        -0.8463196754455566,
        -0.4861305356025696,
        0.4190976917743683,
        0.47317370772361755,
        -0.05752158910036087,
        0.2825917899608612,
        0.10006977617740631,
        0.9897027015686035,
        0.509256899356842,
        -0.5044418573379517,
        0.42012128233909607,
        -0.24852131307125092,
        -0.22875183820724487,
        -0.20570272207260132,
        0.3140498101711273,
        0.16882652044296265,
        -0.4850849211215973,
        0.4290100634098053,
        -0.11379993706941605,
        0.6414793133735657,
        0.11951537430286407,
        -0.25808706879615784,
        0.1577635109424591,
        0.1523457020521164,
        -0.20659761130809784,
        0.12085552513599396,
        0.32097887992858887,
        0.3333219289779663,
        0.27305611968040466,
        -0.4406772553920746,
        0.2860071063041687,
        -0.914055585861206,
        -0.3358224034309387,
        0.5024823546409607,
        0.9573284387588501,
        0.16544777154922485,
        -0.665866494178772,
        0.5508446097373962,
        0.09139984846115112,
        -0.6573935151100159,
        -0.3867882490158081,
        -0.06785993278026581,
        -0.3599776327610016,
        0.1204809844493866,
        0.5123690366744995,
        0.4020688533782959,
        -0.6220114231109619,
        0.24736559391021729,
        0.07337309420108795,
        0.05987570434808731,
        -0.21461094915866852,
        0.6449196338653564,
        0.1797913908958435,
        -0.5307525396347046,
        -0.15144050121307373,
        -0.36314329504966736,
        -0.2033367156982422,
        -0.0962001234292984,
        0.5914103984832764,
        0.16938692331314087,
        -0.10586046427488327,
        0.256032258272171
    ]
}