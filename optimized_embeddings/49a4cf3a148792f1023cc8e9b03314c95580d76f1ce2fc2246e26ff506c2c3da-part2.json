{
    "id": "49a4cf3a148792f1023cc8e9b03314c95580d76f1ce2fc2246e26ff506c2c3da-part2",
    "url": "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_shield_account_sharing.htm&language=en_US&type=5",
    "content": "nullSalesforce B2B Commerce for Visualforce\nTABLE OF CONTENTS\nClose\nClose\nSearch\nSearch\n Salesforce B2B Commerce for Visualforce\n Get Started with B2B Commerce for Visualforce\n Manage Storefront Details and Metadata\n Set Up Product Data for B2B Commerce for Visualforce\n Help Buyers Discover Products on Your Storefront\n Price and Sell Products for B2B Commerce for Visualforce\n Support Buyer Accounts for B2B Commerce for Visualforce\n Provide a Smooth Path to Purchase for Storefront Buyers\n Customize the Storefront User Experience\n Strategize for Storefront Success\n Deliver Storefront Performance and Security\n Improve Storefront Performance with Platform Cache\n Enable Caching for Storefront Pages\n Log Storefront Code Execution\n Measure and Evaluate Performance of Your Storefront Pages\n Adjust Field-Level Security for B2B Commerce for Visualforce Objects\n Enable Shield Platform Encryption for B2B Commerce for Visualforce...\n Update the Account Object's Sharing Rule for Encrypted Data for B2B...\n Transform API Return Data on the Salesforce Platform\n Supported Browsers for B2B Commerce for Visualforce Storefronts\n Browser Cookies Set by B2B Commerce for Visualforce\n Market Templates for B2B Commerce for Visualforce\n Solution Resources for B2B Commerce for Visualforce\n\nYou are here:\n\nSALESFORCE HELP\nDOCS\nVISUALFORCE B2B COMMERCE\nUpdate the Account Object's Sharing Rule for Encrypted Data for B2B Commerce for Visualforce\n\nWhen you enable Shield Platform Encryption for the standard account object's Account Name field, update the required sharing rule for the account object.\n\nREQUIRED EDITIONS AND USER PERMISSIONS\n\nSalesforce Compatibility\n\nSalesforce Classic (not available in all orgs) and Lightning Experience for Enterprise, Performance, Unlimited, and Developer editions.\n\n\n\n\nB2B Commerce Compatibility\n\nB2B Commerce for Visualforce Winter ’21 (version 4.13)\nB2B Commerce for Visualforce Spring ’20 (version 4.12)\nB2B Commerce for Visualforce Summer ’19 (version 4.11)\nB2B Commerce for Visualforce Spring ’19 (version 4.10)\n\n\nUSER PERMISSIONS NEEDED\nTo view page layouts:\tView Setup and Configuration\nTo customize page layouts:\tCustomize Application\nTo modify accounts:\tEdit on account\nTo modify sharing rules:\tManage Sharing\n\nThe account object sharing rule is required for all storefronts, and ensures that all users—registered or guest buyers—can log in successfully. You created this sharing rule when you first set up your storefront. The sharing rule's criteria is based on the account object's Account Name field, but the criteria is incompatible with an encrypted field. To avoid the conflict with the Account Name field but preserve the sharing rule's access, update the sharing rule criteria to reference a different field, such as DataId.\n\nAdd the DataId custom field to the standard account layout.\nFind the page layouts for the standard account object.\nIn Lightning Experience, click the Object Manager tab in Setup. Select Account, and then scroll to the Page Layouts section.\nIn Salesforce Classic, enter Account in the Quick Find box in Setup. Select Page Layouts under Accounts.\nEdit Account Layout.\nDrag DataId from Fields to the Account Detail section in the page layout.\nSave your changes.\nVerify that the DataId field on the affected account records specifies the value that the sharing rule requires.\nOn the Accounts tab in your org, find the account named CCAnonymous.\nIn the account details, find the DataId field, and verify that its value is CCANONYMOUS.\nTIP If this field doesn't have a value, edit the account, enter CCANONYMOUS, and save your changes.\nOn the Accounts tab, find the account named PortalAccount.\nIn the account details, find the DataId field, and verify that its value is PORTALACCOUNT.\nTIP If this field doesn't have a value, edit the account, enter PORTALACCOUNT, and save your changes.\nUpdate the account object's sharing rule so that its criteria references the DataId field instead of the Account Name field.\nFrom Setup, enter Sharing Settings in the Quick Find box, and then select Sharing Settings.\nScroll to the Account Sharing Rules section.\nFind the following rule, and click Edit.\nCriteria—(Account: Account.TextName EQUALS CCAnonymous) OR (Account: Account.TextName EQUALS PortalAccount)\nShared With—Storefront Site Guest User, such as DefaultStore Site Guest User\nIn the sharing rule criteria, select DataId instead of Account Name from the Field picklist:\nFIELD (LABEL)\tOPERATOR\tVALUE\nDataId\tequals\tCCAnonymous\nDataId\tequals\tPortalAccount\nSave your changes.\nSEE ALSO\nCreate Sharing Rules for Guest User Access to Storefront Objects\nSalesforce Help: Find Object Management Settings in Salesforce Classic\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Updating Account Object Sharing Rule for Encrypted Data",
    "keywords": [
        "account sharing rule",
        "encrypted data",
        "dataid field",
        "sharing settings",
        "storefront site guest user",
        "managed sharing"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_visualforce.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_start.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_install.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup_community_users.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup_self_register.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_setup_sharing_rules.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_admin.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_admin_global.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_storefront_data.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_settings_loader.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_admin_storefront.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_configuration.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_configuration_settings.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_types.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_dynamic_kit.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_image.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_discovery.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_category.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_category_media.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_spec.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_product_index.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_sell.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_price_list.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_promotion.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_coupon.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_buyer.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_account_group.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_effective_account.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_purchase.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_cart_scale.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_storefront_ux.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_pages.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_home.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_checkout.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_my_account.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_product_compare.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_product_detail.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_product_list.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_scaled_cart.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_shopping_cart.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_site_login.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_site_register.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components_effective_account_selector.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components_feature_filtering.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_components_spotlight_featured_products.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_page_labels.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_menu.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_theme.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_extension.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_storefront.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_localize.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_seo.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_seo_friendly_urls.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_seo_bot_pages.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_lwc.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_trust.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.b2b_commerce_shield.htm&language=en_US&type=5",
        "https://help.salesforce.com/s?language=en_US",
        "https://help.salesforce.com/s/articleView?id=sf.overview_edition_lex_only.htm&language=en_US&type=5",
        "https://help.salesforce.com/s/articleView?id=sf.extend_click_find_objectmgmt.htm&language=en_US&type=5"
    ],
    "embedding": [
        -0.032786089926958084,
        0.15048059821128845,
        0.7611347436904907,
        -0.3112674951553345,
        -0.11490121483802795,
        -0.1770089715719223,
        -0.6224271059036255,
        0.506887674331665,
        0.7126203775405884,
        0.1996011883020401,
        0.3269980251789093,
        -0.8396086692810059,
        0.49217426776885986,
        -0.8166244626045227,
        0.08079536259174347,
        -0.4229157567024231,
        0.2267104536294937,
        0.5910739898681641,
        -0.6315203309059143,
        -0.3305717408657074,
        -0.302143394947052,
        -0.4210650622844696,
        -0.17774900794029236,
        -0.0203036367893219,
        -0.17591004073619843,
        0.30543017387390137,
        -0.4068508446216583,
        0.26641109585762024,
        0.802814245223999,
        -0.4274989366531372,
        -0.7353221774101257,
        0.7394660115242004,
        0.43475428223609924,
        -0.5669711828231812,
        0.6523613929748535,
        0.19394506514072418,
        0.26585617661476135,
        0.6595159769058228,
        -0.046378105878829956,
        0.15551938116550446,
        0.0272696353495121,
        0.45087364315986633,
        -0.00367790088057518,
        -0.8113918900489807,
        -0.29714709520339966,
        -0.2668103575706482,
        -0.5089660286903381,
        1.0617543458938599,
        -0.16757895052433014,
        -0.27647125720977783,
        0.08400779962539673,
        -0.29241281747817993,
        -1.0654124021530151,
        -0.4571349024772644,
        -0.7513192892074585,
        0.0978216677904129,
        -0.4790184497833252,
        -0.09955541789531708,
        0.7983410954475403,
        -0.6267418265342712,
        4.208506107330322,
        0.7793846726417542,
        0.8592420220375061,
        0.4232240617275238,
        0.5002456903457642,
        1.4557164907455444,
        -0.14700907468795776,
        -0.08723002672195435,
        -0.058952730149030685,
        -0.6899974942207336,
        0.01771204173564911,
        -0.01067671924829483,
        0.3908606469631195,
        0.5902450084686279,
        -0.7946833372116089,
        0.10312201082706451,
        -0.5472182035446167,
        0.2538212537765503,
        0.3062085509300232,
        -0.8632877469062805,
        -0.9900348782539368,
        -0.2400251030921936,
        0.2153327614068985,
        0.9812735319137573,
        -0.5254712104797363,
        -0.165455624461174,
        0.1467180997133255,
        -0.2659071087837219,
        -0.8158565163612366,
        -1.0498310327529907,
        0.7199475765228271,
        -0.5170722007751465,
        0.9152595400810242,
        -0.5914507508277893,
        0.2341492772102356,
        0.36323490738868713,
        0.3142577111721039,
        0.08990776538848877,
        -0.1800154447555542,
        -0.7377048134803772,
        0.5407958626747131,
        0.27939945459365845,
        -1.2252964973449707,
        -0.3257709741592407,
        0.029534962028265,
        0.29972362518310547,
        -0.14462575316429138,
        0.1994916796684265,
        0.38369423151016235,
        -0.37319982051849365,
        0.628032922744751,
        -0.4309770166873932,
        0.47190603613853455,
        -0.6235285997390747,
        -0.47352737188339233,
        0.5718308091163635,
        0.1253933608531952,
        -0.5055311322212219,
        -0.32259395718574524,
        0.10887371748685837,
        0.44161975383758545,
        0.4203060269355774,
        -0.10455322265625,
        -0.21027129888534546,
        -0.26608750224113464,
        0.6450424790382385,
        0.29228609800338745,
        1.3252044916152954,
        -0.5637702941894531,
        0.03434930369257927,
        -0.3244873583316803,
        -0.5176939964294434,
        -0.550542950630188,
        -0.5686750411987305,
        -0.10511443018913269,
        -0.9208382964134216,
        -0.11703313887119293,
        0.43088871240615845,
        0.926173985004425,
        -0.35640662908554077,
        0.05867902934551239,
        0.352884978055954,
        -0.6284859776496887,
        -0.3015424609184265,
        0.6719721555709839,
        -0.10971800982952118,
        -0.7203336358070374,
        -0.3191021680831909,
        0.5962901711463928,
        -0.10772857069969177,
        0.19555357098579407,
        0.33055004477500916,
        -0.24699494242668152,
        -0.25503093004226685,
        -0.03498335927724838
    ]
}