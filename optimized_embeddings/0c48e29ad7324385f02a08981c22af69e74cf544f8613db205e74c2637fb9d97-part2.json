{
    "id": "0c48e29ad7324385f02a08981c22af69e74cf544f8613db205e74c2637fb9d97-part2",
    "url": "https://help.salesforce.com/s/articleView?id=000364639&type=1&language=en_US",
    "content": "nullPassword Grant Type Changes for Salesforce B2C Commerce\nPublish Date: Mar 31, 2022\nDescription\nAt Salesforce, we understand that the security and protection of your data is critical to your business. To further protect your data, we are enforcing MFA for Salesforce B2C Commerce customers in May 2022. You can learn more about Salesforce’s position on MFA and enforcement considerations by reviewing the Salesforce MFA FAQ.\n\nAs part of this MFA work, we have identified rare instances where use of one of the OAUTH 2.0 grant types (that is, Resource Owner Password Credentials Grant (ROPC)) used to authenticate on behalf of an Account Manager User may be limited after MFA enforcement.\n\nPossible limitations for customers who use ROPC include: inability to log in to Salesforce B2C Commerce when the MFA authentication service used by Salesforce B2C Commerce runs in maintenance mode or when ROPC is used for automation purposes.\n\nWhen will this change happen?\nStarting May 2022, all Salesforce B2C Commerce customers are required to use MFA for all their user logins. This requirement includes logins where customers’ API clients use the Resource Owner Password Credentials Grant type (ROPC), part of OAUTH 2.0  specifications, to authenticate on behalf of an Account Manager User.\n\nHow does this change impact me?\nCustomers whose API clients use an Account Manager User’s credentials to authenticate and gets an Access Token (as part of ROPC grant type) to access Salesforce B2C Commerce platform may, in rare instances, experience an inability to authenticate using the ROPC grant type after MFA is enforced in May 2022. This includes customers who have created automation around on-demand sandboxes or CI/CD operations and are leveraging ROPC grant type.\n\nAdditionally, if you continue to use ROPC, you may notice limitations to logins when the MFA authentication service used by Salesforce B2C Commerce runs in maintenance mode. During these maintenance windows these API clients will not be able to access the Salesforce B2C Commerce platform.\nResolution\nHow do I know if I’m using ROPC? \nDetermine whether you use the ROPC grant type and then decide if you should adjust your use of the ROPC grant type to use client credential grant type or authorization grant type in advance of MFA enforcement in May 2022.\n\nIdentify whether your ROPC use case applies by reviewing the following scenarios:\n\nScenario 1: Customers are affected by this if they are using the following SFCC CLI command to pass a username and password along with client id and client-secret:\nsfcc-ci client:auth <client-id> <client-secret> <username> <password>\n\nScenario 2: Customers are affected by this if they have set up automation related to CI/CD operations or around On-Demand Sandboxes. This could include scenarios where customers may be using API clients as mentioned in Scenario 1.\n\nScenario 3: Customers are affected by this if they write a custom API client that is completing certain operations on behalf of a user.\n\nWhat are alternatives to ROPC?\nThere are alternatives to using ROPC grant type and we strongly recommend using either client credential grant type or authorization grant type in advance of MFA enforcement in May 2022.\n \nClient Credential Grant Type: Client Credential grant type is one of the most common ways for automating many operations, such as managing On-Demand Sandboxes. In this scenario API Clients do not act on behalf of the user, rather they authenticate with Salesforce B2C Commerce using various authentication methods like (Client Secret/password or JWT). We recommend using JWT, which is Bearer’s Public Key. Customers can also assign a Role to API clients to limit what they can perform. Assign a role to an API client through Account Administrator using Account Manager:\nGo to Commerce Cloud Developer Experience and select Sandbox API User, OR\nGo to Salesforce Commerce API and select Salesforce Commerce API\n \nAuthorization Code Grant Type: The Authorization Code grant type requires the user to authenticate with the Account Manager before returning the Auth Code to the API client. The API Client then authorizes the Account Manager using the Auth Code before it issues an Access Token. Using Access Token, API client can then perform operations on Salesforce B2C Commerce. These operations are limited to the user role and scope configured in Account Manager.\n\nHelpful Tips\nYou can use the MFA adoption report in the Salesforce Commerce Cloud CLI to identify which users are and are not using MFA. You can then use the results to determine which users are being used as part of the API client and using ROPC grant type. This is an Open Source command-line interface (CLI) for Salesforce Commerce Cloud. It can be used to enable deployment and continuous integration practices using Salesforce B2C Commerce.\n\nIn this same Open Source command-line interface (CLI), you can find additional details for changing grant types.\n\nResources\nSalesforce MFA FAQ and B2C Commerce FAQ.\nSalesforce MFA Enforcement Roadmap.\nReview the technical information about supported OAUTH 2.0 Grant Types.\nKnowledge Article Number\n\n000390888\n\nDID THIS ARTICLE SOLVE YOUR ISSUE?\nLet us know so we can improve!\nYes\nNo\n ",
    "title": "Salesforce B2C Commerce MFA and OAuth Changes",
    "keywords": [
        "MFA enforcement",
        "OAuth changes",
        "client credential grant type",
        "authorization code grant type",
        "resource owner password credentials grant",
        "ROPC limitation"
    ],
    "links": [
        "https://help.salesforce.com/sfsites/c/resource/HTCommunityCustomJS/HC_TbidAuth.js",
        "https://help.salesforce.com/s/support\",\"target\":\"_self\",\"label\":\"Contact",
        "https://help.salesforce.com/s/articleView?id=000352937&type=1&language=en_US",
        "https://help.salesforce.com/s/articleView?id=000364011&type=1&language=en_US",
        "https://help.salesforce.com/s/articleView?id=000362737&type=1&language=en_US"
    ],
    "embedding": [
        -0.5107914209365845,
        -0.27731388807296753,
        0.448542058467865
    ]
}